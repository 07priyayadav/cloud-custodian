.. _azure.sqlserver:

azure.sqlserver
===============

SQL Server Resource

:example:

This policy will find all SQL servers with average DTU consumption under
10 percent over the last 72 hours

.. code-block:: yaml

    policies:
      - name: sqlserver-under-utilized
        resource: azure.sqlserver
        filters:
          - type: metric
            metric: dtu_consumption_percent
            op: lt
            aggregation: average
            threshold: 10
            timeframe: 72
            filter: "ElasticPoolResourceId eq '*'"
            no_data_action: include

:example:

This policy will find all SQL servers without any firewall rules defined.

.. code-block:: yaml

    policies:
      - name: find-sqlserver-without-firewall-rules
        resource: azure.sqlserver
        filters:
          - type: firewall-rules
            equal: []

:example:

This policy will find all SQL servers allowing traffic from 1.2.2.128/25 CIDR.

.. code-block:: yaml

    policies:
      - name: find-sqlserver-allowing-subnet
        resource: azure.sqlserver
        filters:
          - type: firewall-rules
            include: ['1.2.2.128/25']

Filters
-------


  - :ref:`cost <azure.common.filters.cost>`
  
  - :ref:`diagnostic-settings <azure.common.filters.diagnostic-settings>`
  
  - :ref:`event <azure.common.filters.event>`
  
  - :ref:`firewall-rules <azure.common.filters.firewall-rules>`
  
  - :ref:`marked-for-op <azure.common.filters.marked-for-op>`
  
  - :ref:`metric <azure.common.filters.metric>`
  
  - :ref:`offhour <azure.common.filters.offhour>`
  
  - :ref:`onhour <azure.common.filters.onhour>`
  
  - :ref:`policy-compliant <azure.common.filters.policy-compliant>`
  
  - :ref:`resource-lock <azure.common.filters.resource-lock>`
  
  - :ref:`value <azure.common.filters.value>`
  




Actions
-------


  - :ref:`auto-tag-date <azure.common.actions.auto-tag-date>`
  
  - :ref:`auto-tag-user <azure.common.actions.auto-tag-user>`
  
  - :ref:`delete <azure.common.actions.delete>`
  
  - :ref:`lock <azure.common.actions.lock>`
  
  - :ref:`logic-app <azure.common.actions.logic-app>`
  
  - :ref:`mark-for-op <azure.common.actions.mark-for-op>`
  
  - :ref:`notify <azure.common.actions.notify>`
  
  - :ref:`tag <azure.common.actions.tag>`
  
  - :ref:`tag-trim <azure.common.actions.tag-trim>`
  
  - :ref:`untag <azure.common.actions.untag>`
  
  - :ref:`webhook <azure.common.actions.webhook>`
  



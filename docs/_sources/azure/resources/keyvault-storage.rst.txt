.. File Generated By c7n-sphinxext from source. Do not edit.

.. _azure.keyvault-storage:

azure.keyvault-storage
======================

Key Vault Managed Storage Account Resource

:example:

List all Key Vault managed Storage Accounts

.. code-block:: yaml

    policies:
      - name: keyvault-storage
        resource: azure.keyvault-storage

Filters
-------


  - :ref:`active-key-name <azure.common.filters.active-key-name>`
  
  - :ref:`auto-regenerate-key <azure.common.filters.auto-regenerate-key>`
  
  - :ref:`event <azure.common.filters.event>`
  
  - :ref:`parent <azure.common.filters.parent>`
  
  - :ref:`regeneration-period <azure.common.filters.regeneration-period>`
  
  - :ref:`value <azure.common.filters.value>`
  




Actions
-------


  - :ref:`logic-app <azure.common.actions.logic-app>`
  
  - :ref:`notify <azure.common.actions.notify>`
  
  - :ref:`regenerate-key <azure.keyvault-storage.actions.regenerate-key>`

  - :ref:`update <azure.keyvault-storage.actions.update>`

  - :ref:`webhook <azure.common.actions.webhook>`
  



.. _azure.keyvault-storage.actions.regenerate-key:

regenerate-key
++++++++++++++
Regenerate Managed Storage Access Key

:example:

Regenerate all Access Keys older than 30 days.

.. code-block:: yaml

    policies:
      - name: azure-managed-storage-regenerate-key
        resource: azure.keyvault-storage
        filters:
          - type: value
            key: attributes.updated
            op: gt
            value_type: age
            value: 30
        actions:
         - type: regenerate-key

.. container:: toggle

  

  .. raw:: html
     
    <div class="header docutils container" style=""></div>

  .. code-block:: yaml

    properties:
      type:
        enum:
        - regenerate-key
    required:
    - type


.. _azure.keyvault-storage.actions.update:

update
++++++
Update Key Vault Managed Storage Account properties.

:example:

Ensure all keys have auto regenerate enabled with 30 days rotation policy.

.. code-block:: yaml

    policies:
      - name: azure-managed-storage-update
        resource: azure.keyvault-storage
        filters:
          - or:
            - type: auto-regenerate-key
              value: false
            - type: regeneration-period
              op: ne
              value: P30D
        actions:
         - type: update
           auto-regenerate-key: true
           regeneration-period: P30D

.. container:: toggle

  

  .. raw:: html
     
    <div class="header docutils container" style=""></div>

  .. code-block:: yaml

    properties:
      active-key-name:
        type: string
      auto-regenerate-key:
        type: boolean
      regeneration-period:
        type: string
      type:
        enum:
        - update
    required:
    - type



- name: Install Base Packages
  yum: name={{ item }} state=present
  with_items:
    - git
    - python-virtualenv

- name: Install Dev Packages
  yum: name={{ item }} state=present
  with_items:
    - nano
    - tmux
    - emacs-nox    

- name: Create maid group
  become: true
  group: >
    name=maid
    state=present

- name: Create maid user
  become: true
  user: >
    name=maid
    group=maid

- name: Create maid directories
  become: true
  file: >
    state=directory
    path={{ item }}
    owner=maid
    group=maid
    mode=0755
  with_items:
    - /etc/maid
    - /etc/maid/policies
    - /var/log/maid
    - /var/cache/maid
    - /usr/local/maid

- name: Fetch maid source
  become: true
  git:
    repo: "https://github.kdc.capitalone.com/ylv522/cloud-janitor.git"
    dest: "/usr/local/maid/maid"    

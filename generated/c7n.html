

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>c7n package &mdash; Cloud Custodian 1.0 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/c1_labs.png"/>
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="Cloud Custodian 1.0 documentation" href="../index.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Cloud Custodian
          

          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul>
<li class="toctree-l1"><a class="reference internal" href="../overview/index.html">Overview</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../quickstart/index.html">Quickstart</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../usecases/index.html">Use Cases</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../policy/index.html">Policy</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">Cloud Custodian</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
    <li>c7n package</li>
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="c7n-package">
<h1>c7n package<a class="headerlink" href="#c7n-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="subpackages">
<h2>Subpackages<a class="headerlink" href="#subpackages" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="c7n.reports.html">c7n.reports package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="c7n.reports.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="c7n.reports.html#module-c7n.reports.csvout">c7n.reports.csvout module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="c7n.reports.html#reporting-tools">Reporting Tools</a><ul>
<li class="toctree-l4"><a class="reference internal" href="c7n.reports.html#cli-usage">CLI Usage</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="c7n.reports.html#module-c7n.reports">Module contents</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="c7n.resources.html">c7n.resources package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="c7n.resources.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="c7n.resources.html#module-c7n.resources.acm">c7n.resources.acm module</a></li>
<li class="toctree-l2"><a class="reference internal" href="c7n.resources.html#module-c7n.resources.ami">c7n.resources.ami module</a></li>
<li class="toctree-l2"><a class="reference internal" href="c7n.resources.html#module-c7n.resources.apigw">c7n.resources.apigw module</a></li>
<li class="toctree-l2"><a class="reference internal" href="c7n.resources.html#module-c7n.resources.asg">c7n.resources.asg module</a></li>
<li class="toctree-l2"><a class="reference internal" href="c7n.resources.html#module-c7n.resources.awslambda">c7n.resources.awslambda module</a></li>
<li class="toctree-l2"><a class="reference internal" href="c7n.resources.html#module-c7n.resources.cache">c7n.resources.cache module</a></li>
<li class="toctree-l2"><a class="reference internal" href="c7n.resources.html#module-c7n.resources.cfn">c7n.resources.cfn module</a></li>
<li class="toctree-l2"><a class="reference internal" href="c7n.resources.html#module-c7n.resources.cw">c7n.resources.cw module</a></li>
<li class="toctree-l2"><a class="reference internal" href="c7n.resources.html#module-c7n.resources.dynamodb">c7n.resources.dynamodb module</a></li>
<li class="toctree-l2"><a class="reference internal" href="c7n.resources.html#module-c7n.resources.ebs">c7n.resources.ebs module</a></li>
<li class="toctree-l2"><a class="reference internal" href="c7n.resources.html#module-c7n.resources.ec2">c7n.resources.ec2 module</a></li>
<li class="toctree-l2"><a class="reference internal" href="c7n.resources.html#module-c7n.resources.ecr">c7n.resources.ecr module</a></li>
<li class="toctree-l2"><a class="reference internal" href="c7n.resources.html#module-c7n.resources.ecs">c7n.resources.ecs module</a></li>
<li class="toctree-l2"><a class="reference internal" href="c7n.resources.html#module-c7n.resources.elb">c7n.resources.elb module</a></li>
<li class="toctree-l2"><a class="reference internal" href="c7n.resources.html#module-c7n.resources.emr">c7n.resources.emr module</a></li>
<li class="toctree-l2"><a class="reference internal" href="c7n.resources.html#module-c7n.resources.firehose">c7n.resources.firehose module</a></li>
<li class="toctree-l2"><a class="reference internal" href="c7n.resources.html#module-c7n.resources.glacier">c7n.resources.glacier module</a></li>
<li class="toctree-l2"><a class="reference internal" href="c7n.resources.html#module-c7n.resources.iam">c7n.resources.iam module</a></li>
<li class="toctree-l2"><a class="reference internal" href="c7n.resources.html#module-c7n.resources.kinesis">c7n.resources.kinesis module</a></li>
<li class="toctree-l2"><a class="reference internal" href="c7n.resources.html#module-c7n.resources.kms">c7n.resources.kms module</a></li>
<li class="toctree-l2"><a class="reference internal" href="c7n.resources.html#module-c7n.resources.rds">c7n.resources.rds module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="c7n.resources.html#rds-resource-manager">RDS Resource Manager</a><ul>
<li class="toctree-l4"><a class="reference internal" href="c7n.resources.html#example-policies">Example Policies</a></li>
<li class="toctree-l4"><a class="reference internal" href="c7n.resources.html#todo-notes">Todo/Notes</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="c7n.resources.html#module-c7n.resources.redshift">c7n.resources.redshift module</a></li>
<li class="toctree-l2"><a class="reference internal" href="c7n.resources.html#module-c7n.resources.route53">c7n.resources.route53 module</a></li>
<li class="toctree-l2"><a class="reference internal" href="c7n.resources.html#module-c7n.resources.s3">c7n.resources.s3 module</a></li>
<li class="toctree-l2"><a class="reference internal" href="c7n.resources.html#module-c7n.resources.sns">c7n.resources.sns module</a></li>
<li class="toctree-l2"><a class="reference internal" href="c7n.resources.html#module-c7n.resources.sqs">c7n.resources.sqs module</a></li>
<li class="toctree-l2"><a class="reference internal" href="c7n.resources.html#module-c7n.resources.vpc">c7n.resources.vpc module</a></li>
<li class="toctree-l2"><a class="reference internal" href="c7n.resources.html#module-c7n.resources">Module contents</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="c7n.ufuncs.html">c7n.ufuncs package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="c7n.ufuncs.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="c7n.ufuncs.html#module-c7n.ufuncs.logsub">c7n.ufuncs.logsub module</a></li>
<li class="toctree-l2"><a class="reference internal" href="c7n.ufuncs.html#module-c7n.ufuncs.s3crypt">c7n.ufuncs.s3crypt module</a></li>
<li class="toctree-l2"><a class="reference internal" href="c7n.ufuncs.html#module-c7n.ufuncs">Module contents</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-c7n.actions">
<span id="c7n-actions-module"></span><h2>c7n.actions module<a class="headerlink" href="#module-c7n.actions" title="Permalink to this headline">¶</a></h2>
<p>Actions to take on resources</p>
<dl class="class">
<dt id="c7n.actions.ActionRegistry">
<em class="property">class </em><code class="descclassname">c7n.actions.</code><code class="descname">ActionRegistry</code><span class="sig-paren">(</span><em>*args</em>, <em>**kw</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/actions.html#ActionRegistry"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.actions.ActionRegistry" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#c7n.registry.PluginRegistry" title="c7n.registry.PluginRegistry"><code class="xref py py-class docutils literal"><span class="pre">c7n.registry.PluginRegistry</span></code></a></p>
<dl class="method">
<dt id="c7n.actions.ActionRegistry.factory">
<code class="descname">factory</code><span class="sig-paren">(</span><em>data</em>, <em>manager</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/actions.html#ActionRegistry.factory"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.actions.ActionRegistry.factory" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="c7n.actions.ActionRegistry.parse">
<code class="descname">parse</code><span class="sig-paren">(</span><em>data</em>, <em>manager</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/actions.html#ActionRegistry.parse"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.actions.ActionRegistry.parse" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="c7n.actions.BaseAction">
<em class="property">class </em><code class="descclassname">c7n.actions.</code><code class="descname">BaseAction</code><span class="sig-paren">(</span><em>data=None</em>, <em>manager=None</em>, <em>log_dir=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/actions.html#BaseAction"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.actions.BaseAction" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<dl class="attribute">
<dt id="c7n.actions.BaseAction.executor_factory">
<code class="descname">executor_factory</code><a class="headerlink" href="#c7n.actions.BaseAction.executor_factory" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <code class="xref py py-class docutils literal"><span class="pre">ThreadPoolExecutor</span></code></p>
</dd></dl>

<dl class="method">
<dt id="c7n.actions.BaseAction.get_permissions">
<code class="descname">get_permissions</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/actions.html#BaseAction.get_permissions"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.actions.BaseAction.get_permissions" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="c7n.actions.BaseAction.log">
<code class="descname">log</code><em class="property"> = &lt;logging.Logger object&gt;</em><a class="headerlink" href="#c7n.actions.BaseAction.log" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="c7n.actions.BaseAction.metrics">
<code class="descname">metrics</code><em class="property"> = ()</em><a class="headerlink" href="#c7n.actions.BaseAction.metrics" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="c7n.actions.BaseAction.name">
<code class="descname">name</code><a class="headerlink" href="#c7n.actions.BaseAction.name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="c7n.actions.BaseAction.permissions">
<code class="descname">permissions</code><em class="property"> = ()</em><a class="headerlink" href="#c7n.actions.BaseAction.permissions" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="c7n.actions.BaseAction.process">
<code class="descname">process</code><span class="sig-paren">(</span><em>resources</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/actions.html#BaseAction.process"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.actions.BaseAction.process" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="c7n.actions.BaseAction.schema">
<code class="descname">schema</code><em class="property"> = {'type': 'object'}</em><a class="headerlink" href="#c7n.actions.BaseAction.schema" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="c7n.actions.BaseAction.validate">
<code class="descname">validate</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/actions.html#BaseAction.validate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.actions.BaseAction.validate" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="c7n.actions.EventAction">
<em class="property">class </em><code class="descclassname">c7n.actions.</code><code class="descname">EventAction</code><span class="sig-paren">(</span><em>data=None</em>, <em>manager=None</em>, <em>log_dir=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/actions.html#EventAction"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.actions.EventAction" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#c7n.actions.BaseAction" title="c7n.actions.BaseAction"><code class="xref py py-class docutils literal"><span class="pre">c7n.actions.BaseAction</span></code></a></p>
<p>Actions which receive lambda event if present</p>
</dd></dl>

<dl class="class">
<dt id="c7n.actions.LambdaInvoke">
<em class="property">class </em><code class="descclassname">c7n.actions.</code><code class="descname">LambdaInvoke</code><span class="sig-paren">(</span><em>data=None</em>, <em>manager=None</em>, <em>log_dir=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/actions.html#LambdaInvoke"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.actions.LambdaInvoke" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#c7n.actions.EventAction" title="c7n.actions.EventAction"><code class="xref py py-class docutils literal"><span class="pre">c7n.actions.EventAction</span></code></a></p>
<p>Invoke an arbitrary lambda</p>
<dl class="docutils">
<dt>serialized invocation parameters</dt>
<dd><ul class="first last simple">
<li>resources / collection of resources</li>
<li>policy / policy that is invoke the lambda</li>
<li>action / action that is invoking the lambda</li>
<li>event / cloud trail event if any</li>
<li>version / version of custodian invoking the lambda</li>
</ul>
</dd>
</dl>
<p>We try to utilize async invocation by default, this imposes
some greater size limits of 128kb which means we batch
invoke.</p>
<dl class="method">
<dt id="c7n.actions.LambdaInvoke.process">
<code class="descname">process</code><span class="sig-paren">(</span><em>resources</em>, <em>event=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/actions.html#LambdaInvoke.process"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.actions.LambdaInvoke.process" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="c7n.actions.LambdaInvoke.schema">
<code class="descname">schema</code><em class="property"> = {'additionalProperties': False, 'required': ('function',), 'type': 'object', 'properties': {'function': {'type': 'string'}, 'async': {'type': 'boolean'}, 'type': {'enum': ['invoke-lambda']}, 'qualifier': {'type': 'string'}, 'batch_size': {'type': 'integer'}}}</em><a class="headerlink" href="#c7n.actions.LambdaInvoke.schema" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="c7n.actions.Notify">
<em class="property">class </em><code class="descclassname">c7n.actions.</code><code class="descname">Notify</code><span class="sig-paren">(</span><em>data=None</em>, <em>manager=None</em>, <em>log_dir=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/actions.html#Notify"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.actions.Notify" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#c7n.actions.EventAction" title="c7n.actions.EventAction"><code class="xref py py-class docutils literal"><span class="pre">c7n.actions.EventAction</span></code></a></p>
<p>Flexible notifications require quite a bit of implementation support
on pluggable transports, templates, address resolution, variable
extraction, batch periods, etc.</p>
<p>For expedience and flexibility then, we instead send the data to
an sqs queue, for processing. ie. actual communications is DIY atm.</p>
<p>Example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">policies</span><span class="p">:</span>
  <span class="o">-</span> <span class="n">name</span><span class="p">:</span> <span class="n">ec2</span><span class="o">-</span><span class="n">bad</span><span class="o">-</span><span class="n">instance</span><span class="o">-</span><span class="n">kill</span>
    <span class="n">resource</span><span class="p">:</span> <span class="n">ec2</span>
    <span class="n">filters</span><span class="p">:</span>
     <span class="o">-</span> <span class="n">Name</span><span class="p">:</span> <span class="n">bad</span><span class="o">-</span><span class="n">instance</span>
    <span class="n">actions</span><span class="p">:</span>
     <span class="o">-</span> <span class="n">terminate</span>
     <span class="o">-</span> <span class="nb">type</span><span class="p">:</span> <span class="n">notify</span>
       <span class="n">to</span><span class="p">:</span>
        <span class="o">-</span> <span class="n">event</span><span class="o">-</span><span class="n">user</span>
        <span class="o">-</span> <span class="n">resource</span><span class="o">-</span><span class="n">creator</span>
        <span class="o">-</span> <span class="n">email</span><span class="nd">@address</span>
       <span class="c1"># which template for the email should we use</span>
       <span class="n">template</span><span class="p">:</span> <span class="n">policy</span><span class="o">-</span><span class="n">template</span>
       <span class="n">transport</span><span class="p">:</span>
         <span class="nb">type</span><span class="p">:</span> <span class="n">sqs</span>
         <span class="n">region</span><span class="p">:</span> <span class="n">us</span><span class="o">-</span><span class="n">east</span><span class="o">-</span><span class="mi">1</span>
         <span class="n">queue</span><span class="p">:</span> <span class="n">xyz</span>
</pre></div>
</div>
<dl class="attribute">
<dt id="c7n.actions.Notify.C7N_DATA_MESSAGE">
<code class="descname">C7N_DATA_MESSAGE</code><em class="property"> = 'maidmsg/1.0'</em><a class="headerlink" href="#c7n.actions.Notify.C7N_DATA_MESSAGE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="c7n.actions.Notify.process">
<code class="descname">process</code><span class="sig-paren">(</span><em>resources</em>, <em>event=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/actions.html#Notify.process"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.actions.Notify.process" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="c7n.actions.Notify.schema">
<code class="descname">schema</code><em class="property"> = {'required': ['type', 'transport', 'to'], 'type': 'object', 'properties': {'to': {'items': {'type': 'string'}, 'type': 'array'}, 'from': {'type': 'string'}, 'template': {'type': 'string'}, 'cc': {'items': {'type': 'string'}, 'type': 'array'}, 'cc_manager': {'type': 'boolean'}, 'type': {'enum': ['notify']}, 'transport': {'required': ['type', 'queue'], 'type': 'object', 'properties': {'queue': {'type': 'string'}, 'region': {'type': 'string'}, 'type': {'enum': ['sqs']}}}, 'subject': {'type': 'string'}}}</em><a class="headerlink" href="#c7n.actions.Notify.schema" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="c7n.actions.Notify.send_data_message">
<code class="descname">send_data_message</code><span class="sig-paren">(</span><em>message</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/actions.html#Notify.send_data_message"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.actions.Notify.send_data_message" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="c7n.actions.Notify.send_sqs">
<code class="descname">send_sqs</code><span class="sig-paren">(</span><em>message</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/actions.html#Notify.send_sqs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.actions.Notify.send_sqs" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="module-c7n.cache">
<span id="c7n-cache-module"></span><h2>c7n.cache module<a class="headerlink" href="#module-c7n.cache" title="Permalink to this headline">¶</a></h2>
<p>Provide basic caching services to avoid extraneous queries over
multiple policies on the same resource type.</p>
<dl class="class">
<dt id="c7n.cache.FileCacheManager">
<em class="property">class </em><code class="descclassname">c7n.cache.</code><code class="descname">FileCacheManager</code><span class="sig-paren">(</span><em>config</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/cache.html#FileCacheManager"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.cache.FileCacheManager" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<dl class="method">
<dt id="c7n.cache.FileCacheManager.get">
<code class="descname">get</code><span class="sig-paren">(</span><em>key</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/cache.html#FileCacheManager.get"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.cache.FileCacheManager.get" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="c7n.cache.FileCacheManager.load">
<code class="descname">load</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/cache.html#FileCacheManager.load"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.cache.FileCacheManager.load" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="c7n.cache.FileCacheManager.save">
<code class="descname">save</code><span class="sig-paren">(</span><em>key</em>, <em>data</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/cache.html#FileCacheManager.save"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.cache.FileCacheManager.save" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="c7n.cache.NullCache">
<em class="property">class </em><code class="descclassname">c7n.cache.</code><code class="descname">NullCache</code><span class="sig-paren">(</span><em>config</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/cache.html#NullCache"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.cache.NullCache" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<dl class="method">
<dt id="c7n.cache.NullCache.get">
<code class="descname">get</code><span class="sig-paren">(</span><em>key</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/cache.html#NullCache.get"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.cache.NullCache.get" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="c7n.cache.NullCache.load">
<code class="descname">load</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/cache.html#NullCache.load"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.cache.NullCache.load" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="c7n.cache.NullCache.save">
<code class="descname">save</code><span class="sig-paren">(</span><em>key</em>, <em>data</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/cache.html#NullCache.save"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.cache.NullCache.save" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="function">
<dt id="c7n.cache.factory">
<code class="descclassname">c7n.cache.</code><code class="descname">factory</code><span class="sig-paren">(</span><em>config</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/cache.html#factory"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.cache.factory" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-c7n.cli">
<span id="c7n-cli-module"></span><h2>c7n.cli module<a class="headerlink" href="#module-c7n.cli" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="c7n.cli.main">
<code class="descclassname">c7n.cli.</code><code class="descname">main</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/cli.html#main"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.cli.main" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="c7n.cli.setup_parser">
<code class="descclassname">c7n.cli.</code><code class="descname">setup_parser</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/cli.html#setup_parser"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.cli.setup_parser" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-c7n.commands">
<span id="c7n-commands-module"></span><h2>c7n.commands module<a class="headerlink" href="#module-c7n.commands" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="c7n.commands.cmd_version">
<code class="descclassname">c7n.commands.</code><code class="descname">cmd_version</code><span class="sig-paren">(</span><em>options</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/commands.html#cmd_version"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.commands.cmd_version" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="c7n.commands.logs">
<code class="descclassname">c7n.commands.</code><code class="descname">logs</code><span class="sig-paren">(</span><em>options</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/commands.html#logs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.commands.logs" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="c7n.commands.policy_command">
<code class="descclassname">c7n.commands.</code><code class="descname">policy_command</code><span class="sig-paren">(</span><em>f</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/commands.html#policy_command"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.commands.policy_command" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="c7n.commands.report">
<code class="descclassname">c7n.commands.</code><code class="descname">report</code><span class="sig-paren">(</span><em>options</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/commands.html#report"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.commands.report" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="c7n.commands.resources">
<code class="descclassname">c7n.commands.</code><code class="descname">resources</code><span class="sig-paren">(</span><em>options</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/commands.html#resources"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.commands.resources" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="c7n.commands.run">
<code class="descclassname">c7n.commands.</code><code class="descname">run</code><span class="sig-paren">(</span><em>options</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/commands.html#run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.commands.run" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="c7n.commands.validate">
<code class="descclassname">c7n.commands.</code><code class="descname">validate</code><span class="sig-paren">(</span><em>options</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/commands.html#validate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.commands.validate" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-c7n.credentials">
<span id="c7n-credentials-module"></span><h2>c7n.credentials module<a class="headerlink" href="#module-c7n.credentials" title="Permalink to this headline">¶</a></h2>
<p>Authentication utilities</p>
<dl class="class">
<dt id="c7n.credentials.SessionFactory">
<em class="property">class </em><code class="descclassname">c7n.credentials.</code><code class="descname">SessionFactory</code><span class="sig-paren">(</span><em>region</em>, <em>profile=None</em>, <em>assume_role=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/credentials.html#SessionFactory"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.credentials.SessionFactory" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
</dd></dl>

<dl class="function">
<dt id="c7n.credentials.assumed_session">
<code class="descclassname">c7n.credentials.</code><code class="descname">assumed_session</code><span class="sig-paren">(</span><em>role_arn</em>, <em>session_name</em>, <em>session=None</em>, <em>region=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/credentials.html#assumed_session"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.credentials.assumed_session" title="Permalink to this definition">¶</a></dt>
<dd><p>STS Role assume a boto3.Session</p>
<p>With automatic credential renewal.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd>role_arn: iam role arn to assume
session_name: client session identifier
session: an optional extant session, note session is captured
in a function closure for renewing the sts assumed role.</dd>
</dl>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">a boto3 session using the sts assumed role credentials</td>
</tr>
</tbody>
</table>
<p>Notes: We have to poke at botocore internals a few times</p>
</dd></dl>

</div>
<div class="section" id="module-c7n.ctx">
<span id="c7n-ctx-module"></span><h2>c7n.ctx module<a class="headerlink" href="#module-c7n.ctx" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="c7n.ctx.ExecutionContext">
<em class="property">class </em><code class="descclassname">c7n.ctx.</code><code class="descname">ExecutionContext</code><span class="sig-paren">(</span><em>session_factory</em>, <em>policy</em>, <em>options</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/ctx.html#ExecutionContext"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.ctx.ExecutionContext" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Policy Execution Context.</p>
<dl class="attribute">
<dt id="c7n.ctx.ExecutionContext.log_dir">
<code class="descname">log_dir</code><a class="headerlink" href="#c7n.ctx.ExecutionContext.log_dir" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="module-c7n.cwe">
<span id="c7n-cwe-module"></span><h2>c7n.cwe module<a class="headerlink" href="#module-c7n.cwe" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="c7n.cwe.CloudWatchEvents">
<em class="property">class </em><code class="descclassname">c7n.cwe.</code><code class="descname">CloudWatchEvents</code><a class="reference internal" href="../_modules/c7n/cwe.html#CloudWatchEvents"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.cwe.CloudWatchEvents" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>A mapping of events to resource types.</p>
<dl class="classmethod">
<dt id="c7n.cwe.CloudWatchEvents.get">
<em class="property">classmethod </em><code class="descname">get</code><span class="sig-paren">(</span><em>event_name</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/cwe.html#CloudWatchEvents.get"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.cwe.CloudWatchEvents.get" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="c7n.cwe.CloudWatchEvents.get_ids">
<em class="property">classmethod </em><code class="descname">get_ids</code><span class="sig-paren">(</span><em>event</em>, <em>mode</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/cwe.html#CloudWatchEvents.get_ids"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.cwe.CloudWatchEvents.get_ids" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="c7n.cwe.CloudWatchEvents.match">
<em class="property">classmethod </em><code class="descname">match</code><span class="sig-paren">(</span><em>event</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/cwe.html#CloudWatchEvents.match"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.cwe.CloudWatchEvents.match" title="Permalink to this definition">¶</a></dt>
<dd><p>Match a given cwe event as cloudtrail with an api call</p>
<p>That has its information filled out.</p>
</dd></dl>

<dl class="attribute">
<dt id="c7n.cwe.CloudWatchEvents.trail_events">
<code class="descname">trail_events</code><em class="property"> = {'UpdateAutoScalingGroup': {'source': 'autoscaling.amazonaws.com', 'ids': 'requestParameters.autoScalingGroupName'}, 'CreateBucket': {'source': 's3.amazonaws.com', 'ids': 'requestParameters.bucketName'}, 'CreateAutoScalingGroup': {'source': 'autoscaling.amazonaws.com', 'ids': 'requestParameters.autoScalingGroupName'}, 'CreateCluster': {'source': 'redshift.amazonaws.com', 'ids': 'requestParameters.clusterIdentifier'}, 'CreateLoadBalancerPolicy': {'source': 'elasticloadbalancing.amazonaws.com', 'ids': 'requestParameters.loadBalancerName'}, 'CreateDBInstance': {'source': 'rds.amazonaws.com', 'ids': 'requestParameters.dBInstanceIdentifier'}, 'CreateLoadBalancer': {'source': 'elasticloadbalancing.amazonaws.com', 'ids': 'requestParameters.loadBalancerName'}, 'SetLoadBalancerPoliciesOfListener': {'source': 'elasticloadbalancing.amazonaws.com', 'ids': 'requestParameters.loadBalancerName'}, 'CreateVolume': {'source': 'ec2.amazonaws.com', 'ids': 'responseElements.volumeId'}, 'RunInstances': {'source': 'ec2.amazonaws.com', 'ids': 'responseElements.instancesSet.items[].instanceId'}}</em><a class="headerlink" href="#c7n.cwe.CloudWatchEvents.trail_events" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="module-c7n.executor">
<span id="c7n-executor-module"></span><h2>c7n.executor module<a class="headerlink" href="#module-c7n.executor" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="c7n.executor.ExecutorRegistry">
<em class="property">class </em><code class="descclassname">c7n.executor.</code><code class="descname">ExecutorRegistry</code><span class="sig-paren">(</span><em>plugin_type</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/executor.html#ExecutorRegistry"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.executor.ExecutorRegistry" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#c7n.registry.PluginRegistry" title="c7n.registry.PluginRegistry"><code class="xref py py-class docutils literal"><span class="pre">c7n.registry.PluginRegistry</span></code></a></p>
</dd></dl>

<dl class="class">
<dt id="c7n.executor.MainThreadExecutor">
<em class="property">class </em><code class="descclassname">c7n.executor.</code><code class="descname">MainThreadExecutor</code><span class="sig-paren">(</span><em>*args</em>, <em>**kw</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/executor.html#MainThreadExecutor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.executor.MainThreadExecutor" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<dl class="method">
<dt id="c7n.executor.MainThreadExecutor.map">
<code class="descname">map</code><span class="sig-paren">(</span><em>func</em>, <em>iterable</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/executor.html#MainThreadExecutor.map"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.executor.MainThreadExecutor.map" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="c7n.executor.MainThreadExecutor.submit">
<code class="descname">submit</code><span class="sig-paren">(</span><em>func</em>, <em>*args</em>, <em>**kw</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/executor.html#MainThreadExecutor.submit"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.executor.MainThreadExecutor.submit" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="c7n.executor.MainThreadFuture">
<em class="property">class </em><code class="descclassname">c7n.executor.</code><code class="descname">MainThreadFuture</code><span class="sig-paren">(</span><em>value</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/executor.html#MainThreadFuture"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.executor.MainThreadFuture" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<dl class="method">
<dt id="c7n.executor.MainThreadFuture.add_done_callback">
<code class="descname">add_done_callback</code><span class="sig-paren">(</span><em>fn</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/executor.html#MainThreadFuture.add_done_callback"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.executor.MainThreadFuture.add_done_callback" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="c7n.executor.MainThreadFuture.cancel">
<code class="descname">cancel</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/executor.html#MainThreadFuture.cancel"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.executor.MainThreadFuture.cancel" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="c7n.executor.MainThreadFuture.cancelled">
<code class="descname">cancelled</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/executor.html#MainThreadFuture.cancelled"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.executor.MainThreadFuture.cancelled" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="c7n.executor.MainThreadFuture.done">
<code class="descname">done</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/executor.html#MainThreadFuture.done"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.executor.MainThreadFuture.done" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="c7n.executor.MainThreadFuture.exception">
<code class="descname">exception</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/executor.html#MainThreadFuture.exception"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.executor.MainThreadFuture.exception" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="c7n.executor.MainThreadFuture.result">
<code class="descname">result</code><span class="sig-paren">(</span><em>timeout=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/executor.html#MainThreadFuture.result"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.executor.MainThreadFuture.result" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="function">
<dt id="c7n.executor.executor">
<code class="descclassname">c7n.executor.</code><code class="descname">executor</code><span class="sig-paren">(</span><em>name</em>, <em>**kw</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/executor.html#executor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.executor.executor" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-c7n.filters">
<span id="c7n-filters-module"></span><h2>c7n.filters module<a class="headerlink" href="#module-c7n.filters" title="Permalink to this headline">¶</a></h2>
<p>Resource Filtering Logic</p>
<dl class="class">
<dt id="c7n.filters.AgeFilter">
<em class="property">class </em><code class="descclassname">c7n.filters.</code><code class="descname">AgeFilter</code><span class="sig-paren">(</span><em>data</em>, <em>manager=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/filters.html#AgeFilter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.filters.AgeFilter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#c7n.filters.Filter" title="c7n.filters.Filter"><code class="xref py py-class docutils literal"><span class="pre">c7n.filters.Filter</span></code></a></p>
<p>Automatically filter resources older than a given date.</p>
<dl class="attribute">
<dt id="c7n.filters.AgeFilter.date_attribute">
<code class="descname">date_attribute</code><em class="property"> = None</em><a class="headerlink" href="#c7n.filters.AgeFilter.date_attribute" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="c7n.filters.AgeFilter.get_resource_date">
<code class="descname">get_resource_date</code><span class="sig-paren">(</span><em>i</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/filters.html#AgeFilter.get_resource_date"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.filters.AgeFilter.get_resource_date" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="c7n.filters.AgeFilter.schema">
<code class="descname">schema</code><em class="property"> = None</em><a class="headerlink" href="#c7n.filters.AgeFilter.schema" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="c7n.filters.AgeFilter.threshold_date">
<code class="descname">threshold_date</code><em class="property"> = None</em><a class="headerlink" href="#c7n.filters.AgeFilter.threshold_date" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="c7n.filters.AgeFilter.validate">
<code class="descname">validate</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/filters.html#AgeFilter.validate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.filters.AgeFilter.validate" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="c7n.filters.And">
<em class="property">class </em><code class="descclassname">c7n.filters.</code><code class="descname">And</code><span class="sig-paren">(</span><em>data</em>, <em>registry</em>, <em>manager</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/filters.html#And"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.filters.And" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#c7n.filters.Filter" title="c7n.filters.Filter"><code class="xref py py-class docutils literal"><span class="pre">c7n.filters.Filter</span></code></a></p>
</dd></dl>

<dl class="class">
<dt id="c7n.filters.EventFilter">
<em class="property">class </em><code class="descclassname">c7n.filters.</code><code class="descname">EventFilter</code><span class="sig-paren">(</span><em>data</em>, <em>manager=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/filters.html#EventFilter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.filters.EventFilter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#c7n.filters.ValueFilter" title="c7n.filters.ValueFilter"><code class="xref py py-class docutils literal"><span class="pre">c7n.filters.ValueFilter</span></code></a></p>
<p>Filter against a cloudwatch event associated to a resource type.</p>
<dl class="method">
<dt id="c7n.filters.EventFilter.process">
<code class="descname">process</code><span class="sig-paren">(</span><em>resources</em>, <em>event=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/filters.html#EventFilter.process"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.filters.EventFilter.process" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="c7n.filters.EventFilter.schema">
<code class="descname">schema</code><em class="property"> = {'additionalProperties': False, 'required': ['type'], 'type': 'object', 'properties': {'type': {'enum': ['event']}, 'value_type': {'enum': ['age', 'integer']}, 'key': {'type': 'string'}, 'value': {'oneOf': [{'type': 'array'}, {'type': 'string'}, {'type': 'boolean'}, {'type': 'number'}]}, 'op': {'enum': ['regex', 'ni', 'gt', 'lt', 'gte', 'glob', 'not-equal', 'equal', 'greater-than', 'ne', 'ge', 'le', 'lte', 'in', 'less-than', 'eq', 'not-in']}}}</em><a class="headerlink" href="#c7n.filters.EventFilter.schema" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="c7n.filters.EventFilter.validate">
<code class="descname">validate</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/filters.html#EventFilter.validate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.filters.EventFilter.validate" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="c7n.filters.Filter">
<em class="property">class </em><code class="descclassname">c7n.filters.</code><code class="descname">Filter</code><span class="sig-paren">(</span><em>data</em>, <em>manager=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/filters.html#Filter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.filters.Filter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<dl class="attribute">
<dt id="c7n.filters.Filter.executor_factory">
<code class="descname">executor_factory</code><a class="headerlink" href="#c7n.filters.Filter.executor_factory" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <code class="xref py py-class docutils literal"><span class="pre">ThreadPoolExecutor</span></code></p>
</dd></dl>

<dl class="attribute">
<dt id="c7n.filters.Filter.log">
<code class="descname">log</code><em class="property"> = &lt;logging.Logger object&gt;</em><a class="headerlink" href="#c7n.filters.Filter.log" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="c7n.filters.Filter.metrics">
<code class="descname">metrics</code><em class="property"> = ()</em><a class="headerlink" href="#c7n.filters.Filter.metrics" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="c7n.filters.Filter.process">
<code class="descname">process</code><span class="sig-paren">(</span><em>resources</em>, <em>event=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/filters.html#Filter.process"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.filters.Filter.process" title="Permalink to this definition">¶</a></dt>
<dd><p>Bulk process resources and return filtered set.</p>
</dd></dl>

<dl class="attribute">
<dt id="c7n.filters.Filter.schema">
<code class="descname">schema</code><em class="property"> = {'type': 'object'}</em><a class="headerlink" href="#c7n.filters.Filter.schema" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="c7n.filters.Filter.validate">
<code class="descname">validate</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/filters.html#Filter.validate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.filters.Filter.validate" title="Permalink to this definition">¶</a></dt>
<dd><p>validate filter config, return validation error or self</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="c7n.filters.FilterRegistry">
<em class="property">class </em><code class="descclassname">c7n.filters.</code><code class="descname">FilterRegistry</code><span class="sig-paren">(</span><em>*args</em>, <em>**kw</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/filters.html#FilterRegistry"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.filters.FilterRegistry" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#c7n.registry.PluginRegistry" title="c7n.registry.PluginRegistry"><code class="xref py py-class docutils literal"><span class="pre">c7n.registry.PluginRegistry</span></code></a></p>
<dl class="method">
<dt id="c7n.filters.FilterRegistry.factory">
<code class="descname">factory</code><span class="sig-paren">(</span><em>data</em>, <em>manager=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/filters.html#FilterRegistry.factory"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.filters.FilterRegistry.factory" title="Permalink to this definition">¶</a></dt>
<dd><p>Factory func for filters.</p>
<p>data - policy config for filters
manager - resource type manager (ec2, s3, etc)</p>
</dd></dl>

<dl class="method">
<dt id="c7n.filters.FilterRegistry.parse">
<code class="descname">parse</code><span class="sig-paren">(</span><em>data</em>, <em>manager</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/filters.html#FilterRegistry.parse"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.filters.FilterRegistry.parse" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="exception">
<dt id="c7n.filters.FilterValidationError">
<em class="property">exception </em><code class="descclassname">c7n.filters.</code><code class="descname">FilterValidationError</code><a class="reference internal" href="../_modules/c7n/filters.html#FilterValidationError"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.filters.FilterValidationError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">exceptions.Exception</span></code></p>
</dd></dl>

<dl class="class">
<dt id="c7n.filters.Or">
<em class="property">class </em><code class="descclassname">c7n.filters.</code><code class="descname">Or</code><span class="sig-paren">(</span><em>data</em>, <em>registry</em>, <em>manager</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/filters.html#Or"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.filters.Or" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#c7n.filters.Filter" title="c7n.filters.Filter"><code class="xref py py-class docutils literal"><span class="pre">c7n.filters.Filter</span></code></a></p>
</dd></dl>

<dl class="class">
<dt id="c7n.filters.ValueFilter">
<em class="property">class </em><code class="descclassname">c7n.filters.</code><code class="descname">ValueFilter</code><span class="sig-paren">(</span><em>data</em>, <em>manager=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/filters.html#ValueFilter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.filters.ValueFilter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#c7n.filters.Filter" title="c7n.filters.Filter"><code class="xref py py-class docutils literal"><span class="pre">c7n.filters.Filter</span></code></a></p>
<p>Generic value filter using jmespath</p>
<dl class="attribute">
<dt id="c7n.filters.ValueFilter.expr">
<code class="descname">expr</code><em class="property"> = None</em><a class="headerlink" href="#c7n.filters.ValueFilter.expr" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="c7n.filters.ValueFilter.match">
<code class="descname">match</code><span class="sig-paren">(</span><em>i</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/filters.html#ValueFilter.match"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.filters.ValueFilter.match" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="c7n.filters.ValueFilter.op">
<code class="descname">op</code><em class="property"> = None</em><a class="headerlink" href="#c7n.filters.ValueFilter.op" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="c7n.filters.ValueFilter.process_value_type">
<code class="descname">process_value_type</code><span class="sig-paren">(</span><em>sentinel</em>, <em>value</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/filters.html#ValueFilter.process_value_type"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.filters.ValueFilter.process_value_type" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="c7n.filters.ValueFilter.schema">
<code class="descname">schema</code><em class="property"> = {'additionalProperties': False, 'required': ['type'], 'type': 'object', 'properties': {'value_type': {'enum': ['age', 'integer']}, 'type': {'enum': ['value']}, 'value': {'oneOf': [{'type': 'array'}, {'type': 'string'}, {'type': 'boolean'}, {'type': 'number'}]}, 'key': {'type': 'string'}, 'op': {'enum': ['regex', 'ni', 'gt', 'lt', 'gte', 'glob', 'not-equal', 'equal', 'greater-than', 'ne', 'ge', 'le', 'lte', 'in', 'less-than', 'eq', 'not-in']}}}</em><a class="headerlink" href="#c7n.filters.ValueFilter.schema" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="c7n.filters.ValueFilter.v">
<code class="descname">v</code><em class="property"> = None</em><a class="headerlink" href="#c7n.filters.ValueFilter.v" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="c7n.filters.ValueFilter.validate">
<code class="descname">validate</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/filters.html#ValueFilter.validate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.filters.ValueFilter.validate" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="c7n.filters.ValueFilter.vtype">
<code class="descname">vtype</code><em class="property"> = None</em><a class="headerlink" href="#c7n.filters.ValueFilter.vtype" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="function">
<dt id="c7n.filters.glob_match">
<code class="descclassname">c7n.filters.</code><code class="descname">glob_match</code><span class="sig-paren">(</span><em>value</em>, <em>pattern</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/filters.html#glob_match"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.filters.glob_match" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="c7n.filters.operator_in">
<code class="descclassname">c7n.filters.</code><code class="descname">operator_in</code><span class="sig-paren">(</span><em>x</em>, <em>y</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/filters.html#operator_in"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.filters.operator_in" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="c7n.filters.operator_ni">
<code class="descclassname">c7n.filters.</code><code class="descname">operator_ni</code><span class="sig-paren">(</span><em>x</em>, <em>y</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/filters.html#operator_ni"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.filters.operator_ni" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="c7n.filters.regex_match">
<code class="descclassname">c7n.filters.</code><code class="descname">regex_match</code><span class="sig-paren">(</span><em>value</em>, <em>regex</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/filters.html#regex_match"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.filters.regex_match" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-c7n.handler">
<span id="c7n-handler-module"></span><h2>c7n.handler module<a class="headerlink" href="#module-c7n.handler" title="Permalink to this headline">¶</a></h2>
<p>Cloud-Maid Lambda Entry Point</p>
<p>Mostly this serves to load up the policy and dispatch
an event.</p>
<dl class="class">
<dt id="c7n.handler.Config">
<em class="property">class </em><code class="descclassname">c7n.handler.</code><code class="descname">Config</code><a class="reference internal" href="../_modules/c7n/handler.html#Config"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.handler.Config" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">dict</span></code></p>
<dl class="classmethod">
<dt id="c7n.handler.Config.empty">
<em class="property">classmethod </em><code class="descname">empty</code><span class="sig-paren">(</span><em>**kw</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/handler.html#Config.empty"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.handler.Config.empty" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="function">
<dt id="c7n.handler.dispatch_event">
<code class="descclassname">c7n.handler.</code><code class="descname">dispatch_event</code><span class="sig-paren">(</span><em>event</em>, <em>context</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/handler.html#dispatch_event"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.handler.dispatch_event" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-c7n.iamaccess">
<span id="c7n-iamaccess-module"></span><h2>c7n.iamaccess module<a class="headerlink" href="#module-c7n.iamaccess" title="Permalink to this headline">¶</a></h2>
<div class="section" id="iam-resource-policy-checker">
<h3>IAM Resource Policy Checker<a class="headerlink" href="#iam-resource-policy-checker" title="Permalink to this headline">¶</a></h3>
<p>When securing resources with iam policies, we want to parse and evaluate
the resource&#8217;s policy for any cross account or public access grants that
are not intended.</p>
<p>In general, iam policies can be complex, and where possible using iam
simulate is preferrable, but requires passing the caller&#8217;s arn, which
is not feasible when we&#8217;re evaluating who the valid set of callers
are.</p>
<p>References</p>
<ul class="simple">
<li>IAM Policy Evaluation - <a class="reference external" href="http://goo.gl/sH5Dt5">http://goo.gl/sH5Dt5</a></li>
<li>IAM Policy Reference - <a class="reference external" href="http://goo.gl/U0a06y">http://goo.gl/U0a06y</a></li>
</ul>
<dl class="class">
<dt id="c7n.iamaccess.CrossAccountAccessFilter">
<em class="property">class </em><code class="descclassname">c7n.iamaccess.</code><code class="descname">CrossAccountAccessFilter</code><span class="sig-paren">(</span><em>data</em>, <em>manager=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/iamaccess.html#CrossAccountAccessFilter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.iamaccess.CrossAccountAccessFilter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#c7n.filters.Filter" title="c7n.filters.Filter"><code class="xref py py-class docutils literal"><span class="pre">c7n.filters.Filter</span></code></a></p>
<p>Matches any resource which</p>
<dl class="method">
<dt id="c7n.iamaccess.CrossAccountAccessFilter.get_accounts">
<code class="descname">get_accounts</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/iamaccess.html#CrossAccountAccessFilter.get_accounts"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.iamaccess.CrossAccountAccessFilter.get_accounts" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="c7n.iamaccess.CrossAccountAccessFilter.get_resource_policy">
<code class="descname">get_resource_policy</code><span class="sig-paren">(</span><em>r</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/iamaccess.html#CrossAccountAccessFilter.get_resource_policy"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.iamaccess.CrossAccountAccessFilter.get_resource_policy" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="c7n.iamaccess.CrossAccountAccessFilter.policy_attribute">
<code class="descname">policy_attribute</code><em class="property"> = 'Policy'</em><a class="headerlink" href="#c7n.iamaccess.CrossAccountAccessFilter.policy_attribute" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="c7n.iamaccess.CrossAccountAccessFilter.process">
<code class="descname">process</code><span class="sig-paren">(</span><em>resources</em>, <em>event=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/iamaccess.html#CrossAccountAccessFilter.process"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.iamaccess.CrossAccountAccessFilter.process" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="c7n.iamaccess.CrossAccountAccessFilter.schema">
<code class="descname">schema</code><em class="property"> = {'additionalProperties': False, 'required': ['type'], 'type': 'object', 'properties': {'whitelist': {'items': {'type': 'string'}, 'type': 'array'}, 'type': {'enum': ['cross-account']}}}</em><a class="headerlink" href="#c7n.iamaccess.CrossAccountAccessFilter.schema" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="function">
<dt id="c7n.iamaccess.check_cross_account">
<code class="descclassname">c7n.iamaccess.</code><code class="descname">check_cross_account</code><span class="sig-paren">(</span><em>policy_text</em>, <em>allowed_accounts</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/iamaccess.html#check_cross_account"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.iamaccess.check_cross_account" title="Permalink to this definition">¶</a></dt>
<dd><p>Find cross account access policy grant not explicitly allowed</p>
</dd></dl>

</div>
</div>
<div class="section" id="module-c7n.log">
<span id="c7n-log-module"></span><h2>c7n.log module<a class="headerlink" href="#module-c7n.log" title="Permalink to this headline">¶</a></h2>
<p>Python Standard Logging integration with CloudWatch Logs</p>
<p>Double Buffered with background thread delivery.</p>
<p>We do an initial buffering on the log handler directly, to avoid
some of the overhead of pushing to the queue (albeit dubious as
std logging does default lock acquisition around handler emit).
also uses a single thread for all outbound. Background thread
uses a separate session.</p>
<dl class="class">
<dt id="c7n.log.CloudWatchLogHandler">
<em class="property">class </em><code class="descclassname">c7n.log.</code><code class="descname">CloudWatchLogHandler</code><span class="sig-paren">(</span><em>log_group='c7n.log'</em>, <em>log_stream=None</em>, <em>session_factory=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/log.html#CloudWatchLogHandler"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.log.CloudWatchLogHandler" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">logging.Handler</span></code></p>
<p>Python Log Handler to Send to Cloud Watch Logs</p>
<p><a class="reference external" href="http://goo.gl/eZGAEK">http://goo.gl/eZGAEK</a></p>
<dl class="attribute">
<dt id="c7n.log.CloudWatchLogHandler.batch_interval">
<code class="descname">batch_interval</code><em class="property"> = 40</em><a class="headerlink" href="#c7n.log.CloudWatchLogHandler.batch_interval" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="c7n.log.CloudWatchLogHandler.batch_min_buffer">
<code class="descname">batch_min_buffer</code><em class="property"> = 10</em><a class="headerlink" href="#c7n.log.CloudWatchLogHandler.batch_min_buffer" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="c7n.log.CloudWatchLogHandler.batch_size">
<code class="descname">batch_size</code><em class="property"> = 20</em><a class="headerlink" href="#c7n.log.CloudWatchLogHandler.batch_size" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="c7n.log.CloudWatchLogHandler.close">
<code class="descname">close</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/log.html#CloudWatchLogHandler.close"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.log.CloudWatchLogHandler.close" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="c7n.log.CloudWatchLogHandler.emit">
<code class="descname">emit</code><span class="sig-paren">(</span><em>message</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/log.html#CloudWatchLogHandler.emit"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.log.CloudWatchLogHandler.emit" title="Permalink to this definition">¶</a></dt>
<dd><p>Send logs</p>
</dd></dl>

<dl class="method">
<dt id="c7n.log.CloudWatchLogHandler.flush">
<code class="descname">flush</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/log.html#CloudWatchLogHandler.flush"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.log.CloudWatchLogHandler.flush" title="Permalink to this definition">¶</a></dt>
<dd><p>Ensure all logging output has been flushed.</p>
</dd></dl>

<dl class="method">
<dt id="c7n.log.CloudWatchLogHandler.flush_buffers">
<code class="descname">flush_buffers</code><span class="sig-paren">(</span><em>force=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/log.html#CloudWatchLogHandler.flush_buffers"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.log.CloudWatchLogHandler.flush_buffers" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="c7n.log.CloudWatchLogHandler.format_message">
<code class="descname">format_message</code><span class="sig-paren">(</span><em>msg</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/log.html#CloudWatchLogHandler.format_message"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.log.CloudWatchLogHandler.format_message" title="Permalink to this definition">¶</a></dt>
<dd><p>format message.</p>
</dd></dl>

<dl class="method">
<dt id="c7n.log.CloudWatchLogHandler.start_transports">
<code class="descname">start_transports</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/log.html#CloudWatchLogHandler.start_transports"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.log.CloudWatchLogHandler.start_transports" title="Permalink to this definition">¶</a></dt>
<dd><p>start thread transports.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="c7n.log.Error">
<em class="property">class </em><code class="descclassname">c7n.log.</code><code class="descname">Error</code><a class="reference internal" href="../_modules/c7n/log.html#Error"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.log.Error" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<dl class="attribute">
<dt id="c7n.log.Error.AlreadyAccepted">
<code class="descname">AlreadyAccepted</code><em class="property"> = 'DataAlreadyAcceptedException'</em><a class="headerlink" href="#c7n.log.Error.AlreadyAccepted" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="c7n.log.Error.InvalidToken">
<code class="descname">InvalidToken</code><em class="property"> = 'InvalidSequenceTokenException'</em><a class="headerlink" href="#c7n.log.Error.InvalidToken" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="c7n.log.Error.ResourceExists">
<code class="descname">ResourceExists</code><em class="property"> = 'ResourceAlreadyExistsException'</em><a class="headerlink" href="#c7n.log.Error.ResourceExists" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="staticmethod">
<dt id="c7n.log.Error.code">
<em class="property">static </em><code class="descname">code</code><span class="sig-paren">(</span><em>e</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/log.html#Error.code"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.log.Error.code" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="c7n.log.Transport">
<em class="property">class </em><code class="descclassname">c7n.log.</code><code class="descname">Transport</code><span class="sig-paren">(</span><em>queue</em>, <em>batch_size</em>, <em>batch_interval</em>, <em>session_factory</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/log.html#Transport"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.log.Transport" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<dl class="method">
<dt id="c7n.log.Transport.create_stream">
<code class="descname">create_stream</code><span class="sig-paren">(</span><em>group</em>, <em>stream</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/log.html#Transport.create_stream"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.log.Transport.create_stream" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="c7n.log.Transport.loop">
<code class="descname">loop</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/log.html#Transport.loop"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.log.Transport.loop" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="c7n.log.Transport.send">
<code class="descname">send</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/log.html#Transport.send"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.log.Transport.send" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="c7n.log.Transport.send_group">
<code class="descname">send_group</code><span class="sig-paren">(</span><em>k</em>, <em>messages</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/log.html#Transport.send_group"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.log.Transport.send_group" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="module-c7n.manager">
<span id="c7n-manager-module"></span><h2>c7n.manager module<a class="headerlink" href="#module-c7n.manager" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="c7n.manager.ResourceManager">
<em class="property">class </em><code class="descclassname">c7n.manager.</code><code class="descname">ResourceManager</code><span class="sig-paren">(</span><em>ctx</em>, <em>data</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/manager.html#ResourceManager"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.manager.ResourceManager" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<dl class="attribute">
<dt id="c7n.manager.ResourceManager.action_registry">
<code class="descname">action_registry</code><em class="property"> = None</em><a class="headerlink" href="#c7n.manager.ResourceManager.action_registry" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="c7n.manager.ResourceManager.executor_factory">
<code class="descname">executor_factory</code><a class="headerlink" href="#c7n.manager.ResourceManager.executor_factory" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <code class="xref py py-class docutils literal"><span class="pre">ThreadPoolExecutor</span></code></p>
</dd></dl>

<dl class="attribute">
<dt id="c7n.manager.ResourceManager.filter_registry">
<code class="descname">filter_registry</code><em class="property"> = None</em><a class="headerlink" href="#c7n.manager.ResourceManager.filter_registry" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="c7n.manager.ResourceManager.filter_resources">
<code class="descname">filter_resources</code><span class="sig-paren">(</span><em>resources</em>, <em>event=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/manager.html#ResourceManager.filter_resources"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.manager.ResourceManager.filter_resources" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="c7n.manager.ResourceManager.format_json">
<code class="descname">format_json</code><span class="sig-paren">(</span><em>resources</em>, <em>fh</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/manager.html#ResourceManager.format_json"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.manager.ResourceManager.format_json" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="c7n.manager.ResourceManager.get_model">
<code class="descname">get_model</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/manager.html#ResourceManager.get_model"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.manager.ResourceManager.get_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the resource meta-model.</p>
</dd></dl>

<dl class="method">
<dt id="c7n.manager.ResourceManager.get_resources">
<code class="descname">get_resources</code><span class="sig-paren">(</span><em>resource_ids</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/manager.html#ResourceManager.get_resources"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.manager.ResourceManager.get_resources" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve a set of resources by id.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-c7n.metrics">
<span id="c7n-metrics-module"></span><h2>c7n.metrics module<a class="headerlink" href="#module-c7n.metrics" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt>TODO make filters package</dt>
<dd><ul class="first last simple">
<li>offhours</li>
<li>metrics</li>
<li></li>
</ul>
</dd>
</dl>
<dl class="class">
<dt id="c7n.metrics.MetricsFilter">
<em class="property">class </em><code class="descclassname">c7n.metrics.</code><code class="descname">MetricsFilter</code><span class="sig-paren">(</span><em>data</em>, <em>manager=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/metrics.html#MetricsFilter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.metrics.MetricsFilter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#c7n.filters.Filter" title="c7n.filters.Filter"><code class="xref py py-class docutils literal"><span class="pre">c7n.filters.Filter</span></code></a></p>
<p>Supports cloud watch metrics filters on resources.</p>
<p>Docs on cloud watch metrics</p>
<ul class="simple">
<li>GetMetricStatistics - <a class="reference external" href="http://goo.gl/w8mMEY">http://goo.gl/w8mMEY</a></li>
<li>Supported Metrics - <a class="reference external" href="http://goo.gl/n0E0L7">http://goo.gl/n0E0L7</a></li>
</ul>
<p>usage:: yaml</p>
<blockquote>
<div><ul>
<li><p class="first">name: ec2-underutilized
resource: ec2
filters:</p>
<blockquote>
<div><ul class="simple">
<li>type: metric
name: CPUUtilization
days: 4
period: 86400
value: 30
op: less-than</li>
</ul>
</div></blockquote>
</li>
</ul>
</div></blockquote>
<p>Note periods when a resource is not sending metrics are not part
of calculated statistics as in the case of a stopped ec2 instance,
nor for resources to new to have existed the entire
period. ie. being stopped for an ec2 intsance wouldn&#8217;t lower the
average cpu utilization, nor would</p>
<p>Todo</p>
<blockquote>
<div><ul class="simple">
<li>support offhours considerations (just run at night?)</li>
<li>support additional stats, values</li>
</ul>
</div></blockquote>
<p>Use Case / Find Underutilized servers non-inclusive of offhour periods</p>
<blockquote>
<div><p>If server has no data for period, its omitted.</p>
<p>So a server that&#8217;s off reports no metrics for the relevant period.</p>
</div></blockquote>
<dl class="attribute">
<dt id="c7n.metrics.MetricsFilter.DEFAULT_NAMESPACE">
<code class="descname">DEFAULT_NAMESPACE</code><em class="property"> = {'sqs': 'AWS/SQS', 'firehose': 'AWS/Firehose', 'kinesis': 'AWS/Kinesis', 'rds': 'AWS/RDS', 'redshift': 'AWS/Redshift', 'elb': 'AWS/ELB', 'route53': 'AWS/Route53', 'sns': 'AWS/SNS', 'cloudfront': 'AWS/CloudFront', 'dynamodb': 'AWS/DynamoDB', 's3': 'AWS/S3', 'cloudsearch': 'AWS/CloudSearch', 'ec2': 'AWS/EC2', 'emr': 'AWS/EMR', 'ecs': 'AWS/ECS', 'elasticache': 'AWS/ElastiCache', 'logs': 'AWS/Logs', 'events': 'AWS/Events', 'es': 'AWS/ES', 'lambda': 'AWS/Lambda'}</em><a class="headerlink" href="#c7n.metrics.MetricsFilter.DEFAULT_NAMESPACE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="c7n.metrics.MetricsFilter.MAX_QUERY_POINTS">
<code class="descname">MAX_QUERY_POINTS</code><em class="property"> = 50850</em><a class="headerlink" href="#c7n.metrics.MetricsFilter.MAX_QUERY_POINTS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="c7n.metrics.MetricsFilter.MAX_RESULT_POINTS">
<code class="descname">MAX_RESULT_POINTS</code><em class="property"> = 1440</em><a class="headerlink" href="#c7n.metrics.MetricsFilter.MAX_RESULT_POINTS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="c7n.metrics.MetricsFilter.process">
<code class="descname">process</code><span class="sig-paren">(</span><em>resources</em>, <em>event=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/metrics.html#MetricsFilter.process"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.metrics.MetricsFilter.process" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="c7n.metrics.MetricsFilter.process_resource_set">
<code class="descname">process_resource_set</code><span class="sig-paren">(</span><em>resource_set</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/metrics.html#MetricsFilter.process_resource_set"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.metrics.MetricsFilter.process_resource_set" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="c7n.metrics.MetricsFilter.schema">
<code class="descname">schema</code><em class="property"> = {'additionalProperties': False, 'required': ('value', 'name'), 'type': 'object', 'properties': {'statistics': {'enum': ['Average', 'Sum', 'Maximum', 'Minimum', 'SampleCount'], 'type': 'string'}, 'name': {'type': 'string'}, 'namespace': {'type': 'string'}, 'days': {'type': 'number'}, 'value': {'type': 'number'}, 'op': {'enum': ['regex', 'ni', 'gt', 'lt', 'gte', 'glob', 'not-equal', 'equal', 'greater-than', 'ne', 'ge', 'le', 'lte', 'in', 'less-than', 'eq', 'not-in'], 'type': 'string'}, 'type': {'enum': ['metrics']}, 'dimensions': {'items': {'type': 'string'}, 'type': 'array'}}}</em><a class="headerlink" href="#c7n.metrics.MetricsFilter.schema" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="module-c7n.mu">
<span id="c7n-mu-module"></span><h2>c7n.mu module<a class="headerlink" href="#module-c7n.mu" title="Permalink to this headline">¶</a></h2>
<p>Cloud Custodian Lambda Provisioning Support</p>
<p>docs/lambda.rst</p>
<dl class="class">
<dt id="c7n.mu.AbstractLambdaFunction">
<em class="property">class </em><code class="descclassname">c7n.mu.</code><code class="descname">AbstractLambdaFunction</code><a class="reference internal" href="../_modules/c7n/mu.html#AbstractLambdaFunction"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.mu.AbstractLambdaFunction" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Abstract base class for lambda functions.</p>
<dl class="attribute">
<dt id="c7n.mu.AbstractLambdaFunction.alias">
<code class="descname">alias</code><em class="property"> = None</em><a class="headerlink" href="#c7n.mu.AbstractLambdaFunction.alias" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="c7n.mu.AbstractLambdaFunction.description">
<code class="descname">description</code><a class="headerlink" href="#c7n.mu.AbstractLambdaFunction.description" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="c7n.mu.AbstractLambdaFunction.get_archive">
<code class="descname">get_archive</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/mu.html#AbstractLambdaFunction.get_archive"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.mu.AbstractLambdaFunction.get_archive" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the lambda distribution archive object.</p>
</dd></dl>

<dl class="method">
<dt id="c7n.mu.AbstractLambdaFunction.get_config">
<code class="descname">get_config</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/mu.html#AbstractLambdaFunction.get_config"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.mu.AbstractLambdaFunction.get_config" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="c7n.mu.AbstractLambdaFunction.get_events">
<code class="descname">get_events</code><span class="sig-paren">(</span><em>session_factory</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/mu.html#AbstractLambdaFunction.get_events"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.mu.AbstractLambdaFunction.get_events" title="Permalink to this definition">¶</a></dt>
<dd><p>event sources that should be bound to this lambda.</p>
</dd></dl>

<dl class="attribute">
<dt id="c7n.mu.AbstractLambdaFunction.handler">
<code class="descname">handler</code><a class="headerlink" href="#c7n.mu.AbstractLambdaFunction.handler" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="c7n.mu.AbstractLambdaFunction.memory_size">
<code class="descname">memory_size</code><a class="headerlink" href="#c7n.mu.AbstractLambdaFunction.memory_size" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="c7n.mu.AbstractLambdaFunction.name">
<code class="descname">name</code><a class="headerlink" href="#c7n.mu.AbstractLambdaFunction.name" title="Permalink to this definition">¶</a></dt>
<dd><p>Name for the lambda function</p>
</dd></dl>

<dl class="attribute">
<dt id="c7n.mu.AbstractLambdaFunction.role">
<code class="descname">role</code><a class="headerlink" href="#c7n.mu.AbstractLambdaFunction.role" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="c7n.mu.AbstractLambdaFunction.runtime">
<code class="descname">runtime</code><a class="headerlink" href="#c7n.mu.AbstractLambdaFunction.runtime" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="c7n.mu.AbstractLambdaFunction.security_groups">
<code class="descname">security_groups</code><a class="headerlink" href="#c7n.mu.AbstractLambdaFunction.security_groups" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="c7n.mu.AbstractLambdaFunction.subnets">
<code class="descname">subnets</code><a class="headerlink" href="#c7n.mu.AbstractLambdaFunction.subnets" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="c7n.mu.AbstractLambdaFunction.timeout">
<code class="descname">timeout</code><a class="headerlink" href="#c7n.mu.AbstractLambdaFunction.timeout" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="c7n.mu.BucketNotification">
<em class="property">class </em><code class="descclassname">c7n.mu.</code><code class="descname">BucketNotification</code><span class="sig-paren">(</span><em>data</em>, <em>session_factory</em>, <em>bucket</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/mu.html#BucketNotification"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.mu.BucketNotification" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Subscribe a lambda to bucket notifications.</p>
<dl class="method">
<dt id="c7n.mu.BucketNotification.add">
<code class="descname">add</code><span class="sig-paren">(</span><em>func</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/mu.html#BucketNotification.add"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.mu.BucketNotification.add" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="c7n.mu.BucketNotification.delta">
<code class="descname">delta</code><span class="sig-paren">(</span><em>src</em>, <em>tgt</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/mu.html#BucketNotification.delta"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.mu.BucketNotification.delta" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="c7n.mu.BucketNotification.remove">
<code class="descname">remove</code><span class="sig-paren">(</span><em>func</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/mu.html#BucketNotification.remove"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.mu.BucketNotification.remove" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="c7n.mu.CloudWatchEventSource">
<em class="property">class </em><code class="descclassname">c7n.mu.</code><code class="descname">CloudWatchEventSource</code><span class="sig-paren">(</span><em>data</em>, <em>session_factory</em>, <em>prefix='custodian-'</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/mu.html#CloudWatchEventSource"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.mu.CloudWatchEventSource" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Subscribe a lambda to cloud watch events.</p>
<p>Cloud watch events supports a number of different event
sources, from periodic timers with cron syntax, to
real time instance state notifications, cloud trail
events, and realtime asg membership changes.</p>
<p>Event Pattern for Instance State</p>
<div class="highlight-json"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;source&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;aws.ec2&quot;</span><span class="p">],</span>
  <span class="nt">&quot;detail-type&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;EC2 Instance State-change Notification&quot;</span><span class="p">],</span>
  <span class="nt">&quot;detail&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="nt">&quot;state&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;pending&quot;</span><span class="p">]}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Event Pattern for Cloud Trail API</p>
<div class="highlight-json"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;detail-type&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;AWS API Call via CloudTrail&quot;</span><span class="p">],</span>
  <span class="nt">&quot;detail&quot;</span><span class="p">:</span> <span class="p">{</span>
     <span class="nt">&quot;eventSource&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;s3.amazonaws.com&quot;</span><span class="p">],</span>
     <span class="nt">&quot;eventName&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;CreateBucket&quot;</span><span class="p">,</span> <span class="s2">&quot;DeleteBucket&quot;</span><span class="p">]</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="attribute">
<dt id="c7n.mu.CloudWatchEventSource.ASG_EVENT_MAPPING">
<code class="descname">ASG_EVENT_MAPPING</code><em class="property"> = {'launch-success': 'EC2 Instance Launch Successful', 'terminate-success': 'EC2 Instance Terminate Successful', 'terminate-failure': 'EC2 Instance Terminate Unsuccessful', 'launch-failure': 'EC2 Instance Launch Unsuccessful'}</em><a class="headerlink" href="#c7n.mu.CloudWatchEventSource.ASG_EVENT_MAPPING" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="c7n.mu.CloudWatchEventSource.add">
<code class="descname">add</code><span class="sig-paren">(</span><em>func</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/mu.html#CloudWatchEventSource.add"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.mu.CloudWatchEventSource.add" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="staticmethod">
<dt id="c7n.mu.CloudWatchEventSource.delta">
<em class="property">static </em><code class="descname">delta</code><span class="sig-paren">(</span><em>src</em>, <em>tgt</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/mu.html#CloudWatchEventSource.delta"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.mu.CloudWatchEventSource.delta" title="Permalink to this definition">¶</a></dt>
<dd><p>Given two cwe rules determine if the configuration is the same.</p>
<p>Name is already implied.</p>
</dd></dl>

<dl class="method">
<dt id="c7n.mu.CloudWatchEventSource.get">
<code class="descname">get</code><span class="sig-paren">(</span><em>rule_name</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/mu.html#CloudWatchEventSource.get"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.mu.CloudWatchEventSource.get" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="c7n.mu.CloudWatchEventSource.pause">
<code class="descname">pause</code><span class="sig-paren">(</span><em>func</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/mu.html#CloudWatchEventSource.pause"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.mu.CloudWatchEventSource.pause" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="c7n.mu.CloudWatchEventSource.remove">
<code class="descname">remove</code><span class="sig-paren">(</span><em>func</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/mu.html#CloudWatchEventSource.remove"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.mu.CloudWatchEventSource.remove" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="c7n.mu.CloudWatchEventSource.render_event_pattern">
<code class="descname">render_event_pattern</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/mu.html#CloudWatchEventSource.render_event_pattern"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.mu.CloudWatchEventSource.render_event_pattern" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="c7n.mu.CloudWatchEventSource.resolve_cloudtrail_payload">
<code class="descname">resolve_cloudtrail_payload</code><span class="sig-paren">(</span><em>payload</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/mu.html#CloudWatchEventSource.resolve_cloudtrail_payload"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.mu.CloudWatchEventSource.resolve_cloudtrail_payload" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="c7n.mu.CloudWatchEventSource.resume">
<code class="descname">resume</code><span class="sig-paren">(</span><em>func</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/mu.html#CloudWatchEventSource.resume"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.mu.CloudWatchEventSource.resume" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="c7n.mu.CloudWatchEventSource.update">
<code class="descname">update</code><span class="sig-paren">(</span><em>func</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/mu.html#CloudWatchEventSource.update"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.mu.CloudWatchEventSource.update" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="c7n.mu.CloudWatchLogSubscription">
<em class="property">class </em><code class="descclassname">c7n.mu.</code><code class="descname">CloudWatchLogSubscription</code><span class="sig-paren">(</span><em>session_factory</em>, <em>log_groups</em>, <em>filter_pattern</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/mu.html#CloudWatchLogSubscription"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.mu.CloudWatchLogSubscription" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Subscribe a lambda to a log group[s]</p>
<dl class="method">
<dt id="c7n.mu.CloudWatchLogSubscription.add">
<code class="descname">add</code><span class="sig-paren">(</span><em>func</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/mu.html#CloudWatchLogSubscription.add"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.mu.CloudWatchLogSubscription.add" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="c7n.mu.CloudWatchLogSubscription.iam_delay">
<code class="descname">iam_delay</code><em class="property"> = 1.5</em><a class="headerlink" href="#c7n.mu.CloudWatchLogSubscription.iam_delay" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="c7n.mu.CloudWatchLogSubscription.remove">
<code class="descname">remove</code><span class="sig-paren">(</span><em>func</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/mu.html#CloudWatchLogSubscription.remove"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.mu.CloudWatchLogSubscription.remove" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="c7n.mu.LambdaFunction">
<em class="property">class </em><code class="descclassname">c7n.mu.</code><code class="descname">LambdaFunction</code><span class="sig-paren">(</span><em>func_data</em>, <em>archive</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/mu.html#LambdaFunction"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.mu.LambdaFunction" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#c7n.mu.AbstractLambdaFunction" title="c7n.mu.AbstractLambdaFunction"><code class="xref py py-class docutils literal"><span class="pre">c7n.mu.AbstractLambdaFunction</span></code></a></p>
<dl class="attribute">
<dt id="c7n.mu.LambdaFunction.description">
<code class="descname">description</code><a class="headerlink" href="#c7n.mu.LambdaFunction.description" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="c7n.mu.LambdaFunction.get_archive">
<code class="descname">get_archive</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/mu.html#LambdaFunction.get_archive"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.mu.LambdaFunction.get_archive" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="c7n.mu.LambdaFunction.get_events">
<code class="descname">get_events</code><span class="sig-paren">(</span><em>session_factory</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/mu.html#LambdaFunction.get_events"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.mu.LambdaFunction.get_events" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="c7n.mu.LambdaFunction.handler">
<code class="descname">handler</code><a class="headerlink" href="#c7n.mu.LambdaFunction.handler" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="c7n.mu.LambdaFunction.memory_size">
<code class="descname">memory_size</code><a class="headerlink" href="#c7n.mu.LambdaFunction.memory_size" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="c7n.mu.LambdaFunction.name">
<code class="descname">name</code><a class="headerlink" href="#c7n.mu.LambdaFunction.name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="c7n.mu.LambdaFunction.role">
<code class="descname">role</code><a class="headerlink" href="#c7n.mu.LambdaFunction.role" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="c7n.mu.LambdaFunction.runtime">
<code class="descname">runtime</code><a class="headerlink" href="#c7n.mu.LambdaFunction.runtime" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="c7n.mu.LambdaFunction.security_groups">
<code class="descname">security_groups</code><a class="headerlink" href="#c7n.mu.LambdaFunction.security_groups" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="c7n.mu.LambdaFunction.subnets">
<code class="descname">subnets</code><a class="headerlink" href="#c7n.mu.LambdaFunction.subnets" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="c7n.mu.LambdaFunction.timeout">
<code class="descname">timeout</code><a class="headerlink" href="#c7n.mu.LambdaFunction.timeout" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="c7n.mu.LambdaManager">
<em class="property">class </em><code class="descclassname">c7n.mu.</code><code class="descname">LambdaManager</code><span class="sig-paren">(</span><em>session_factory</em>, <em>s3_asset_path=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/mu.html#LambdaManager"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.mu.LambdaManager" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Provides CRUD operations around lambda functions</p>
<dl class="staticmethod">
<dt id="c7n.mu.LambdaManager.delta_function">
<em class="property">static </em><code class="descname">delta_function</code><span class="sig-paren">(</span><em>lambda_func</em>, <em>func</em>, <em>role</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/mu.html#LambdaManager.delta_function"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.mu.LambdaManager.delta_function" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="c7n.mu.LambdaManager.get">
<code class="descname">get</code><span class="sig-paren">(</span><em>func_name</em>, <em>qualifier=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/mu.html#LambdaManager.get"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.mu.LambdaManager.get" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="c7n.mu.LambdaManager.list_functions">
<code class="descname">list_functions</code><span class="sig-paren">(</span><em>prefix=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/mu.html#LambdaManager.list_functions"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.mu.LambdaManager.list_functions" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="c7n.mu.LambdaManager.logs">
<code class="descname">logs</code><span class="sig-paren">(</span><em>func</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/mu.html#LambdaManager.logs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.mu.LambdaManager.logs" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="c7n.mu.LambdaManager.metrics">
<code class="descname">metrics</code><span class="sig-paren">(</span><em>funcs</em>, <em>start</em>, <em>end</em>, <em>period=300</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/mu.html#LambdaManager.metrics"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.mu.LambdaManager.metrics" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="c7n.mu.LambdaManager.publish">
<code class="descname">publish</code><span class="sig-paren">(</span><em>func</em>, <em>alias=None</em>, <em>role=None</em>, <em>s3_uri=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/mu.html#LambdaManager.publish"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.mu.LambdaManager.publish" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="c7n.mu.LambdaManager.publish_alias">
<code class="descname">publish_alias</code><span class="sig-paren">(</span><em>func_data</em>, <em>alias</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/mu.html#LambdaManager.publish_alias"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.mu.LambdaManager.publish_alias" title="Permalink to this definition">¶</a></dt>
<dd><p>Create or update an alias for the given function.</p>
</dd></dl>

<dl class="method">
<dt id="c7n.mu.LambdaManager.remove">
<code class="descname">remove</code><span class="sig-paren">(</span><em>func</em>, <em>alias=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/mu.html#LambdaManager.remove"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.mu.LambdaManager.remove" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="c7n.mu.PolicyLambda">
<em class="property">class </em><code class="descclassname">c7n.mu.</code><code class="descname">PolicyLambda</code><span class="sig-paren">(</span><em>policy</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/mu.html#PolicyLambda"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.mu.PolicyLambda" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#c7n.mu.AbstractLambdaFunction" title="c7n.mu.AbstractLambdaFunction"><code class="xref py py-class docutils literal"><span class="pre">c7n.mu.AbstractLambdaFunction</span></code></a></p>
<p>Wraps a custodian policy to turn it into lambda function.</p>
<dl class="attribute">
<dt id="c7n.mu.PolicyLambda.description">
<code class="descname">description</code><a class="headerlink" href="#c7n.mu.PolicyLambda.description" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="c7n.mu.PolicyLambda.get_archive">
<code class="descname">get_archive</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/mu.html#PolicyLambda.get_archive"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.mu.PolicyLambda.get_archive" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="c7n.mu.PolicyLambda.get_events">
<code class="descname">get_events</code><span class="sig-paren">(</span><em>session_factory</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/mu.html#PolicyLambda.get_events"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.mu.PolicyLambda.get_events" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="c7n.mu.PolicyLambda.handler">
<code class="descname">handler</code><em class="property"> = 'custodian_policy.run'</em><a class="headerlink" href="#c7n.mu.PolicyLambda.handler" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="c7n.mu.PolicyLambda.memory_size">
<code class="descname">memory_size</code><a class="headerlink" href="#c7n.mu.PolicyLambda.memory_size" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="c7n.mu.PolicyLambda.name">
<code class="descname">name</code><a class="headerlink" href="#c7n.mu.PolicyLambda.name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="c7n.mu.PolicyLambda.role">
<code class="descname">role</code><a class="headerlink" href="#c7n.mu.PolicyLambda.role" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="c7n.mu.PolicyLambda.runtime">
<code class="descname">runtime</code><em class="property"> = 'python2.7'</em><a class="headerlink" href="#c7n.mu.PolicyLambda.runtime" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="c7n.mu.PolicyLambda.security_groups">
<code class="descname">security_groups</code><a class="headerlink" href="#c7n.mu.PolicyLambda.security_groups" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="c7n.mu.PolicyLambda.subnets">
<code class="descname">subnets</code><a class="headerlink" href="#c7n.mu.PolicyLambda.subnets" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="c7n.mu.PolicyLambda.timeout">
<code class="descname">timeout</code><em class="property"> = 60</em><a class="headerlink" href="#c7n.mu.PolicyLambda.timeout" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="c7n.mu.PythonPackageArchive">
<em class="property">class </em><code class="descclassname">c7n.mu.</code><code class="descname">PythonPackageArchive</code><span class="sig-paren">(</span><em>src_path</em>, <em>virtualenv_dir=None</em>, <em>skip=None</em>, <em>lib_filter=None</em>, <em>src_filter=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/mu.html#PythonPackageArchive"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.mu.PythonPackageArchive" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Creates a zip file for python lambda functions</p>
<p>Packages up a virtualenv and a source package directory per lambda&#8217;s
directory structure.</p>
<dl class="method">
<dt id="c7n.mu.PythonPackageArchive.add_contents">
<code class="descname">add_contents</code><span class="sig-paren">(</span><em>dest</em>, <em>contents</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/mu.html#PythonPackageArchive.add_contents"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.mu.PythonPackageArchive.add_contents" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="c7n.mu.PythonPackageArchive.add_file">
<code class="descname">add_file</code><span class="sig-paren">(</span><em>src</em>, <em>dest</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/mu.html#PythonPackageArchive.add_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.mu.PythonPackageArchive.add_file" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="c7n.mu.PythonPackageArchive.close">
<code class="descname">close</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/mu.html#PythonPackageArchive.close"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.mu.PythonPackageArchive.close" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="c7n.mu.PythonPackageArchive.create">
<code class="descname">create</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/mu.html#PythonPackageArchive.create"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.mu.PythonPackageArchive.create" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="c7n.mu.PythonPackageArchive.filter_files">
<code class="descname">filter_files</code><span class="sig-paren">(</span><em>files</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/mu.html#PythonPackageArchive.filter_files"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.mu.PythonPackageArchive.filter_files" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="c7n.mu.PythonPackageArchive.get_bytes">
<code class="descname">get_bytes</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/mu.html#PythonPackageArchive.get_bytes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.mu.PythonPackageArchive.get_bytes" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="c7n.mu.PythonPackageArchive.get_checksum">
<code class="descname">get_checksum</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/mu.html#PythonPackageArchive.get_checksum"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.mu.PythonPackageArchive.get_checksum" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the b64 encoded sha256 checksum.</p>
</dd></dl>

<dl class="attribute">
<dt id="c7n.mu.PythonPackageArchive.path">
<code class="descname">path</code><a class="headerlink" href="#c7n.mu.PythonPackageArchive.path" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="c7n.mu.PythonPackageArchive.remove">
<code class="descname">remove</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/mu.html#PythonPackageArchive.remove"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.mu.PythonPackageArchive.remove" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="c7n.mu.PythonPackageArchive.size">
<code class="descname">size</code><a class="headerlink" href="#c7n.mu.PythonPackageArchive.size" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="function">
<dt id="c7n.mu.checksum">
<code class="descclassname">c7n.mu.</code><code class="descname">checksum</code><span class="sig-paren">(</span><em>fh</em>, <em>hasher</em>, <em>blocksize=65536</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/mu.html#checksum"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.mu.checksum" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="c7n.mu.custodian_archive">
<code class="descclassname">c7n.mu.</code><code class="descname">custodian_archive</code><span class="sig-paren">(</span><em>skip=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/mu.html#custodian_archive"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.mu.custodian_archive" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a lambda code archive for running custodian.</p>
</dd></dl>

<dl class="function">
<dt id="c7n.mu.resource_exists">
<code class="descclassname">c7n.mu.</code><code class="descname">resource_exists</code><span class="sig-paren">(</span><em>op</em>, <em>*args</em>, <em>**kw</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/mu.html#resource_exists"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.mu.resource_exists" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="c7n.mu.zinfo">
<code class="descclassname">c7n.mu.</code><code class="descname">zinfo</code><span class="sig-paren">(</span><em>fname</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/mu.html#zinfo"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.mu.zinfo" title="Permalink to this definition">¶</a></dt>
<dd><p>Amazon lambda exec environment setup can break itself
if zip files aren&#8217;t constructed a particular way.</p>
<p>ie. It respects file perm attributes from the zip including
those that prevent lambda from working. Namely lambda
extracts code as one user, and executes code as a different
user without permissions for the executing user to read
the file the lambda function is broken.</p>
<p>Python&#8217;s default zipfile.writestr does a 0600 perm which
we modify here as a workaround.</p>
</dd></dl>

</div>
<div class="section" id="module-c7n.offhours">
<span id="c7n-offhours-module"></span><h2>c7n.offhours module<a class="headerlink" href="#module-c7n.offhours" title="Permalink to this headline">¶</a></h2>
<div class="section" id="offhours-support">
<h3>Offhours support<a class="headerlink" href="#offhours-support" title="Permalink to this headline">¶</a></h3>
<p>Turn resources off based on a schedule. There are two usage modes that
can be configured, opt-in with resources that wish to participate
specifying a tag value with their configuration for
offhours. Additionally opt-out where the schedule is set to apply to
all resources that match the policy filters, resources can specify a
tag value then to allow opt-out behavior.</p>
</div>
<div class="section" id="schedules">
<h3>Schedules<a class="headerlink" href="#schedules" title="Permalink to this headline">¶</a></h3>
<p>The default off hours and on hours are specified per the policy configuration
along with the opt-in/opt-out behavior. Resources can specify the timezone
that they wish to have this scheduled utilized with.</p>
</div>
<div class="section" id="tag-based-configuration">
<h3>Tag Based Configuration<a class="headerlink" href="#tag-based-configuration" title="Permalink to this headline">¶</a></h3>
<p>Note the tag name is configurable per policy configuration, examples below use
default tag name, ie. custodian_downtime.</p>
<ul class="simple">
<li>custodian_downtime:</li>
</ul>
<p>An empty tag value implies night and weekend offhours using the default
time zone configured in the policy (tz=est if unspecified).</p>
<ul class="simple">
<li>custodian_downtime: tz=pt</li>
</ul>
<p>Note all timezone aliases are referenced to a locality to ensure taking into
account local daylight savings time (if any).</p>
<ul class="simple">
<li>custodian_downtime: tz=Americas/Los_Angeles</li>
</ul>
<p>A geography can be specified but must be in the time zone database.</p>
<p>Per <a class="reference external" href="http://www.iana.org/time-zones">http://www.iana.org/time-zones</a></p>
<ul class="simple">
<li>custodian_downtime: off</li>
</ul>
<p>If offhours is configured to run in opt-out mode, this tag can be specified
to disable offhours on a given instance.</p>
</div>
<div class="section" id="policy-examples">
<h3>Policy examples<a class="headerlink" href="#policy-examples" title="Permalink to this headline">¶</a></h3>
<p>Turn ec2 instances on and off</p>
<div class="highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">policies</span><span class="p p-Indicator">:</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">offhours-stop</span>
    <span class="l l-Scalar l-Scalar-Plain">resource</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">ec2</span>
    <span class="l l-Scalar l-Scalar-Plain">filters</span><span class="p p-Indicator">:</span>
       <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">offhour</span>
    <span class="l l-Scalar l-Scalar-Plain">actions</span><span class="p p-Indicator">:</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">stop</span>

  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">offhours-start</span>
    <span class="l l-Scalar l-Scalar-Plain">resource</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">ec2</span>
    <span class="l l-Scalar l-Scalar-Plain">filters</span><span class="p p-Indicator">:</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">onhour</span>
    <span class="l l-Scalar l-Scalar-Plain">actions</span><span class="p p-Indicator">:</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">start</span>
</pre></div>
</div>
<p>Here&#8217;s doing the same with auto scale groups</p>
<div class="highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">policies</span><span class="p p-Indicator">:</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">asg-offhours-stop</span>
    <span class="l l-Scalar l-Scalar-Plain">resource</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">ec2</span>
    <span class="l l-Scalar l-Scalar-Plain">filters</span><span class="p p-Indicator">:</span>
       <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">offhour</span>
    <span class="l l-Scalar l-Scalar-Plain">actions</span><span class="p p-Indicator">:</span>
       <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">suspend</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">asg-onhours-start</span>
    <span class="l l-Scalar l-Scalar-Plain">resource</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">ec2</span>
    <span class="l l-Scalar l-Scalar-Plain">filters</span><span class="p p-Indicator">:</span>
       <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">onhour</span>
    <span class="l l-Scalar l-Scalar-Plain">actions</span><span class="p p-Indicator">:</span>
       <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">resume</span>
</pre></div>
</div>
</div>
<div class="section" id="options">
<h3>Options<a class="headerlink" href="#options" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>tag: the tag name to use when configuring</li>
<li>default_tz: the default timezone to use when interpreting offhours</li>
<li>offhour: the time to turn instances off, specified in 0-24</li>
<li>onhour: the time to turn instances on, specified in 0-24</li>
<li>opt-out: default behavior is opt in, as in <code class="docutils literal"><span class="pre">tag</span></code> must be present, 
with opt-out: true, the tag doesn&#8217;t need to be present.</li>
</ul>
<div class="highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">policies</span><span class="p p-Indicator">:</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">offhours-stop</span>
    <span class="l l-Scalar l-Scalar-Plain">resource</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">ec2</span>
    <span class="l l-Scalar l-Scalar-Plain">filters</span><span class="p p-Indicator">:</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">offhour</span>
        <span class="l l-Scalar l-Scalar-Plain">tag</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">downtime</span>
        <span class="l l-Scalar l-Scalar-Plain">onhour</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">8</span>
        <span class="l l-Scalar l-Scalar-Plain">offhour</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">20</span>
</pre></div>
</div>
<dl class="class">
<dt id="c7n.offhours.OffHour">
<em class="property">class </em><code class="descclassname">c7n.offhours.</code><code class="descname">OffHour</code><span class="sig-paren">(</span><em>data</em>, <em>manager=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/offhours.html#OffHour"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.offhours.OffHour" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#c7n.offhours.Time" title="c7n.offhours.Time"><code class="xref py py-class docutils literal"><span class="pre">c7n.offhours.Time</span></code></a></p>
<dl class="method">
<dt id="c7n.offhours.OffHour.get_sentinel_time">
<code class="descname">get_sentinel_time</code><span class="sig-paren">(</span><em>tz</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/offhours.html#OffHour.get_sentinel_time"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.offhours.OffHour.get_sentinel_time" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="c7n.offhours.OffHour.schema">
<code class="descname">schema</code><em class="property"> = {'additionalProperties': False, 'required': ['offhour', 'default_tz', 'type'], 'type': 'object', 'properties': {'offhour': {'minimum': 0, 'type': 'integer', 'maximum': 24}, 'opt-out': {'type': 'boolean'}, 'skew': {'type': 'integer'}, 'tag': {'type': 'string'}, 'default_tz': {'type': 'string'}, 'type': {'enum': ['offhour']}, 'weekends': {'type': 'boolean'}}}</em><a class="headerlink" href="#c7n.offhours.OffHour.schema" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="c7n.offhours.OnHour">
<em class="property">class </em><code class="descclassname">c7n.offhours.</code><code class="descname">OnHour</code><span class="sig-paren">(</span><em>data</em>, <em>manager=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/offhours.html#OnHour"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.offhours.OnHour" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#c7n.offhours.Time" title="c7n.offhours.Time"><code class="xref py py-class docutils literal"><span class="pre">c7n.offhours.Time</span></code></a></p>
<dl class="method">
<dt id="c7n.offhours.OnHour.get_sentinel_time">
<code class="descname">get_sentinel_time</code><span class="sig-paren">(</span><em>tz</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/offhours.html#OnHour.get_sentinel_time"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.offhours.OnHour.get_sentinel_time" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="c7n.offhours.OnHour.schema">
<code class="descname">schema</code><em class="property"> = {'additionalProperties': False, 'required': ['onhour', 'default_tz', 'type'], 'type': 'object', 'properties': {'opt-out': {'type': 'boolean'}, 'skew': {'type': 'integer'}, 'onhour': {'minimum': 0, 'type': 'integer', 'maximum': 24}, 'tag': {'type': 'string'}, 'default_tz': {'type': 'string'}, 'type': {'enum': ['onhour']}, 'weekends': {'type': 'boolean'}}}</em><a class="headerlink" href="#c7n.offhours.OnHour.schema" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="c7n.offhours.Time">
<em class="property">class </em><code class="descclassname">c7n.offhours.</code><code class="descname">Time</code><span class="sig-paren">(</span><em>data</em>, <em>manager=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/offhours.html#Time"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.offhours.Time" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#c7n.filters.Filter" title="c7n.filters.Filter"><code class="xref py py-class docutils literal"><span class="pre">c7n.filters.Filter</span></code></a></p>
<dl class="method">
<dt id="c7n.offhours.Time.get_local_tz">
<code class="descname">get_local_tz</code><span class="sig-paren">(</span><em>parts</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/offhours.html#Time.get_local_tz"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.offhours.Time.get_local_tz" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="c7n.offhours.Time.get_sentinel_time">
<code class="descname">get_sentinel_time</code><span class="sig-paren">(</span><em>tz</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/offhours.html#Time.get_sentinel_time"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.offhours.Time.get_sentinel_time" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="c7n.offhours.Time.get_tag_parts">
<code class="descname">get_tag_parts</code><span class="sig-paren">(</span><em>i</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/offhours.html#Time.get_tag_parts"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.offhours.Time.get_tag_parts" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="c7n.offhours.Time.process_current_time">
<code class="descname">process_current_time</code><span class="sig-paren">(</span><em>i</em>, <em>parts</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/offhours.html#Time.process_current_time"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.offhours.Time.process_current_time" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="c7n.offhours.Time.schema">
<code class="descname">schema</code><em class="property"> = {'type': 'object', 'properties': {'skew': {'type': 'integer'}, 'tag': {'type': 'string'}, 'weekends': {'type': 'boolean'}, 'default_tz': {'type': 'string'}, 'opt-out': {'type': 'boolean'}}}</em><a class="headerlink" href="#c7n.offhours.Time.schema" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="c7n.offhours.Time.skew">
<code class="descname">skew</code><em class="property"> = 0</em><a class="headerlink" href="#c7n.offhours.Time.skew" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="function">
<dt id="c7n.offhours.resource_id">
<code class="descclassname">c7n.offhours.</code><code class="descname">resource_id</code><span class="sig-paren">(</span><em>i</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/offhours.html#resource_id"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.offhours.resource_id" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
</div>
<div class="section" id="module-c7n.output">
<span id="c7n-output-module"></span><h2>c7n.output module<a class="headerlink" href="#module-c7n.output" title="Permalink to this headline">¶</a></h2>
<p>Outputs metrics, logs, structured records across
a variety of sources.</p>
<p>See docs/usage/outputs.rst</p>
<dl class="class">
<dt id="c7n.output.CloudWatchLogOutput">
<em class="property">class </em><code class="descclassname">c7n.output.</code><code class="descname">CloudWatchLogOutput</code><span class="sig-paren">(</span><em>ctx</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/output.html#CloudWatchLogOutput"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.output.CloudWatchLogOutput" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#c7n.output.LogOutput" title="c7n.output.LogOutput"><code class="xref py py-class docutils literal"><span class="pre">c7n.output.LogOutput</span></code></a></p>
<dl class="method">
<dt id="c7n.output.CloudWatchLogOutput.get_handler">
<code class="descname">get_handler</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/output.html#CloudWatchLogOutput.get_handler"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.output.CloudWatchLogOutput.get_handler" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="c7n.output.CloudWatchLogOutput.log_format">
<code class="descname">log_format</code><em class="property"> = '%(asctime)s - %(levelname)s - %(name)s - %(message)s'</em><a class="headerlink" href="#c7n.output.CloudWatchLogOutput.log_format" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="c7n.output.DirectoryOutput">
<em class="property">class </em><code class="descclassname">c7n.output.</code><code class="descname">DirectoryOutput</code><span class="sig-paren">(</span><em>ctx</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/output.html#DirectoryOutput"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.output.DirectoryOutput" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#c7n.output.FSOutput" title="c7n.output.FSOutput"><code class="xref py py-class docutils literal"><span class="pre">c7n.output.FSOutput</span></code></a></p>
<dl class="attribute">
<dt id="c7n.output.DirectoryOutput.permissions">
<code class="descname">permissions</code><em class="property"> = ()</em><a class="headerlink" href="#c7n.output.DirectoryOutput.permissions" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="c7n.output.FSOutput">
<em class="property">class </em><code class="descclassname">c7n.output.</code><code class="descname">FSOutput</code><span class="sig-paren">(</span><em>ctx</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/output.html#FSOutput"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.output.FSOutput" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#c7n.output.LogOutput" title="c7n.output.LogOutput"><code class="xref py py-class docutils literal"><span class="pre">c7n.output.LogOutput</span></code></a></p>
<dl class="method">
<dt id="c7n.output.FSOutput.compress">
<code class="descname">compress</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/output.html#FSOutput.compress"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.output.FSOutput.compress" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="c7n.output.FSOutput.get_handler">
<code class="descname">get_handler</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/output.html#FSOutput.get_handler"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.output.FSOutput.get_handler" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="staticmethod">
<dt id="c7n.output.FSOutput.join">
<em class="property">static </em><code class="descname">join</code><span class="sig-paren">(</span><em>*parts</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/output.html#FSOutput.join"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.output.FSOutput.join" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="staticmethod">
<dt id="c7n.output.FSOutput.select">
<em class="property">static </em><code class="descname">select</code><span class="sig-paren">(</span><em>path</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/output.html#FSOutput.select"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.output.FSOutput.select" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="c7n.output.LogOutput">
<em class="property">class </em><code class="descclassname">c7n.output.</code><code class="descname">LogOutput</code><span class="sig-paren">(</span><em>ctx</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/output.html#LogOutput"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.output.LogOutput" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<dl class="method">
<dt id="c7n.output.LogOutput.get_handler">
<code class="descname">get_handler</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/output.html#LogOutput.get_handler"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.output.LogOutput.get_handler" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="c7n.output.LogOutput.join_log">
<code class="descname">join_log</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/output.html#LogOutput.join_log"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.output.LogOutput.join_log" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="c7n.output.LogOutput.leave_log">
<code class="descname">leave_log</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/output.html#LogOutput.leave_log"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.output.LogOutput.leave_log" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="c7n.output.LogOutput.log_format">
<code class="descname">log_format</code><em class="property"> = '%(asctime)s - %(name)s - %(levelname)s - %(message)s'</em><a class="headerlink" href="#c7n.output.LogOutput.log_format" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="c7n.output.MetricsOutput">
<em class="property">class </em><code class="descclassname">c7n.output.</code><code class="descname">MetricsOutput</code><span class="sig-paren">(</span><em>ctx</em>, <em>namespace='CloudMaid'</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/output.html#MetricsOutput"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.output.MetricsOutput" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Send metrics data to cloudwatch</p>
<dl class="method">
<dt id="c7n.output.MetricsOutput.flush">
<code class="descname">flush</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/output.html#MetricsOutput.flush"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.output.MetricsOutput.flush" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="c7n.output.MetricsOutput.permissions">
<code class="descname">permissions</code><em class="property"> = ('cloudWatch:PutMetricData',)</em><a class="headerlink" href="#c7n.output.MetricsOutput.permissions" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="c7n.output.MetricsOutput.put_metric">
<code class="descname">put_metric</code><span class="sig-paren">(</span><em>key</em>, <em>value</em>, <em>unit</em>, <em>buffer=False</em>, <em>**dimensions</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/output.html#MetricsOutput.put_metric"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.output.MetricsOutput.put_metric" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="staticmethod">
<dt id="c7n.output.MetricsOutput.select">
<em class="property">static </em><code class="descname">select</code><span class="sig-paren">(</span><em>metrics_enabled</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/output.html#MetricsOutput.select"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.output.MetricsOutput.select" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="c7n.output.NullMetricsOutput">
<em class="property">class </em><code class="descclassname">c7n.output.</code><code class="descname">NullMetricsOutput</code><span class="sig-paren">(</span><em>ctx</em>, <em>namespace='CloudMaid'</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/output.html#NullMetricsOutput"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.output.NullMetricsOutput" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#c7n.output.MetricsOutput" title="c7n.output.MetricsOutput"><code class="xref py py-class docutils literal"><span class="pre">c7n.output.MetricsOutput</span></code></a></p>
<dl class="method">
<dt id="c7n.output.NullMetricsOutput.format_metric">
<code class="descname">format_metric</code><span class="sig-paren">(</span><em>m</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/output.html#NullMetricsOutput.format_metric"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.output.NullMetricsOutput.format_metric" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="c7n.output.NullMetricsOutput.permissions">
<code class="descname">permissions</code><em class="property"> = ()</em><a class="headerlink" href="#c7n.output.NullMetricsOutput.permissions" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="c7n.output.S3Output">
<em class="property">class </em><code class="descclassname">c7n.output.</code><code class="descname">S3Output</code><span class="sig-paren">(</span><em>ctx</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/output.html#S3Output"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.output.S3Output" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#c7n.output.FSOutput" title="c7n.output.FSOutput"><code class="xref py py-class docutils literal"><span class="pre">c7n.output.FSOutput</span></code></a></p>
<p>Usage:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">S3Output</span><span class="p">(</span><span class="n">session_factory</span><span class="p">,</span> <span class="s1">&#39;s3://bucket/prefix&#39;</span><span class="p">):</span>
    <span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;xyz&#39;</span><span class="p">)</span>  <span class="c1"># -&gt; log messages sent to custodian-run.log.gz</span>
</pre></div>
</div>
<dl class="staticmethod">
<dt id="c7n.output.S3Output.join">
<em class="property">static </em><code class="descname">join</code><span class="sig-paren">(</span><em>*parts</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/output.html#S3Output.join"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.output.S3Output.join" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="c7n.output.S3Output.permissions">
<code class="descname">permissions</code><em class="property"> = ('S3:PutObject',)</em><a class="headerlink" href="#c7n.output.S3Output.permissions" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="c7n.output.S3Output.upload">
<code class="descname">upload</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/output.html#S3Output.upload"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.output.S3Output.upload" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="function">
<dt id="c7n.output.s3_join">
<code class="descclassname">c7n.output.</code><code class="descname">s3_join</code><span class="sig-paren">(</span><em>*parts</em><span class="sig-paren">)</span><a class="headerlink" href="#c7n.output.s3_join" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-c7n.policy">
<span id="c7n-policy-module"></span><h2>c7n.policy module<a class="headerlink" href="#module-c7n.policy" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="c7n.policy.Policy">
<em class="property">class </em><code class="descclassname">c7n.policy.</code><code class="descname">Policy</code><span class="sig-paren">(</span><em>data</em>, <em>options</em>, <em>session_factory=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/policy.html#Policy"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.policy.Policy" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<dl class="method">
<dt id="c7n.policy.Policy.get_metrics">
<code class="descname">get_metrics</code><span class="sig-paren">(</span><em>start</em>, <em>end</em>, <em>period</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/policy.html#Policy.get_metrics"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.policy.Policy.get_metrics" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="c7n.policy.Policy.get_resource_manager">
<code class="descname">get_resource_manager</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/policy.html#Policy.get_resource_manager"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.policy.Policy.get_resource_manager" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="c7n.policy.Policy.is_lambda">
<code class="descname">is_lambda</code><a class="headerlink" href="#c7n.policy.Policy.is_lambda" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="c7n.policy.Policy.log">
<code class="descname">log</code><em class="property"> = &lt;logging.Logger object&gt;</em><a class="headerlink" href="#c7n.policy.Policy.log" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="c7n.policy.Policy.name">
<code class="descname">name</code><a class="headerlink" href="#c7n.policy.Policy.name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="c7n.policy.Policy.poll">
<code class="descname">poll</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/policy.html#Policy.poll"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.policy.Policy.poll" title="Permalink to this definition">¶</a></dt>
<dd><p>Query resources and apply policy.</p>
</dd></dl>

<dl class="method">
<dt id="c7n.policy.Policy.provision">
<code class="descname">provision</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/policy.html#Policy.provision"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.policy.Policy.provision" title="Permalink to this definition">¶</a></dt>
<dd><p>Provision policy as a lambda function.</p>
</dd></dl>

<dl class="method">
<dt id="c7n.policy.Policy.push">
<code class="descname">push</code><span class="sig-paren">(</span><em>event</em>, <em>lambda_ctx</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/policy.html#Policy.push"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.policy.Policy.push" title="Permalink to this definition">¶</a></dt>
<dd><p>Run policy in push mode against given event.</p>
<p>Lambda automatically generates cloud watch logs, and metrics
for us, albeit with some deficienies, metrics no longer count
against valid resources matches, but against execution.
Fortunately we already have replacements.</p>
<p>TODO: better customization around execution context outputs
TODO: support centralized lambda exec across accounts.</p>
</dd></dl>

<dl class="attribute">
<dt id="c7n.policy.Policy.resource_type">
<code class="descname">resource_type</code><a class="headerlink" href="#c7n.policy.Policy.resource_type" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="c7n.policy.Policy.run">
<code class="descname">run</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#c7n.policy.Policy.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Run policy in default mode</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="c7n.policy.PolicyCollection">
<em class="property">class </em><code class="descclassname">c7n.policy.</code><code class="descname">PolicyCollection</code><span class="sig-paren">(</span><em>data</em>, <em>options</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/policy.html#PolicyCollection"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.policy.PolicyCollection" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<dl class="method">
<dt id="c7n.policy.PolicyCollection.filter">
<code class="descname">filter</code><span class="sig-paren">(</span><em>filters=None</em>, <em>resource_type=None</em><span class="sig-paren">)</span><a class="headerlink" href="#c7n.policy.PolicyCollection.filter" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="c7n.policy.PolicyCollection.policies">
<code class="descname">policies</code><span class="sig-paren">(</span><em>filters=None</em>, <em>resource_type=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/policy.html#PolicyCollection.policies"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.policy.PolicyCollection.policies" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="function">
<dt id="c7n.policy.load">
<code class="descclassname">c7n.policy.</code><code class="descname">load</code><span class="sig-paren">(</span><em>options</em>, <em>path</em>, <em>format='yaml'</em>, <em>validate=True</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/policy.html#load"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.policy.load" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-c7n.query">
<span id="c7n-query-module"></span><h2>c7n.query module<a class="headerlink" href="#module-c7n.query" title="Permalink to this headline">¶</a></h2>
<p>Query capability built on skew metamodel</p>
<p>tags_spec -&gt; s3, elb, rds</p>
<dl class="docutils">
<dt>detail_spec</dt>
<dd><ul class="first last simple">
<li>aws.route53.healthcheck -&gt; health check info</li>
<li>aws.cloudformation.stack -&gt; stack resources</li>
<li>aws.dymanodb.table -&gt;</li>
</ul>
</dd>
</dl>
<dl class="class">
<dt id="c7n.query.QueryMeta">
<em class="property">class </em><code class="descclassname">c7n.query.</code><code class="descname">QueryMeta</code><a class="reference internal" href="../_modules/c7n/query.html#QueryMeta"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.query.QueryMeta" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">type</span></code></p>
</dd></dl>

<dl class="class">
<dt id="c7n.query.QueryResourceManager">
<em class="property">class </em><code class="descclassname">c7n.query.</code><code class="descname">QueryResourceManager</code><span class="sig-paren">(</span><em>data</em>, <em>options</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/query.html#QueryResourceManager"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.query.QueryResourceManager" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#c7n.manager.ResourceManager" title="c7n.manager.ResourceManager"><code class="xref py py-class docutils literal"><span class="pre">c7n.manager.ResourceManager</span></code></a></p>
<dl class="attribute">
<dt id="c7n.query.QueryResourceManager.action_registry">
<code class="descname">action_registry</code><em class="property"> = &lt;c7n.actions.ActionRegistry object&gt;</em><a class="headerlink" href="#c7n.query.QueryResourceManager.action_registry" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="c7n.query.QueryResourceManager.augment">
<code class="descname">augment</code><span class="sig-paren">(</span><em>resources</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/query.html#QueryResourceManager.augment"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.query.QueryResourceManager.augment" title="Permalink to this definition">¶</a></dt>
<dd><p>subclasses may want to augment resources with additional information.</p>
<p>ie. we want tags by default (rds, elb), and policy, location, acl for
s3 buckets.</p>
</dd></dl>

<dl class="attribute">
<dt id="c7n.query.QueryResourceManager.filter_registry">
<code class="descname">filter_registry</code><em class="property"> = &lt;c7n.filters.FilterRegistry object&gt;</em><a class="headerlink" href="#c7n.query.QueryResourceManager.filter_registry" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="c7n.query.QueryResourceManager.get_resources">
<code class="descname">get_resources</code><span class="sig-paren">(</span><em>ids</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/query.html#QueryResourceManager.get_resources"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.query.QueryResourceManager.get_resources" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="c7n.query.QueryResourceManager.resource_type">
<code class="descname">resource_type</code><em class="property"> = ''</em><a class="headerlink" href="#c7n.query.QueryResourceManager.resource_type" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="c7n.query.QueryResourceManager.resources">
<code class="descname">resources</code><span class="sig-paren">(</span><em>query=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/query.html#QueryResourceManager.resources"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.query.QueryResourceManager.resources" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="c7n.query.ResourceQuery">
<em class="property">class </em><code class="descclassname">c7n.query.</code><code class="descname">ResourceQuery</code><span class="sig-paren">(</span><em>session_factory</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/query.html#ResourceQuery"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.query.ResourceQuery" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<dl class="method">
<dt id="c7n.query.ResourceQuery.filter">
<code class="descname">filter</code><span class="sig-paren">(</span><em>resource_type</em>, <em>**params</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/query.html#ResourceQuery.filter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.query.ResourceQuery.filter" title="Permalink to this definition">¶</a></dt>
<dd><p>Query a set of resources.</p>
</dd></dl>

<dl class="method">
<dt id="c7n.query.ResourceQuery.get">
<code class="descname">get</code><span class="sig-paren">(</span><em>resource_type</em>, <em>identity</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/query.html#ResourceQuery.get"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.query.ResourceQuery.get" title="Permalink to this definition">¶</a></dt>
<dd><p>Get resources by identities</p>
</dd></dl>

<dl class="staticmethod">
<dt id="c7n.query.ResourceQuery.resolve">
<em class="property">static </em><code class="descname">resolve</code><span class="sig-paren">(</span><em>resource_type</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/query.html#ResourceQuery.resolve"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.query.ResourceQuery.resolve" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="module-c7n.registry">
<span id="c7n-registry-module"></span><h2>c7n.registry module<a class="headerlink" href="#module-c7n.registry" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="c7n.registry.PluginRegistry">
<em class="property">class </em><code class="descclassname">c7n.registry.</code><code class="descname">PluginRegistry</code><span class="sig-paren">(</span><em>plugin_type</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/registry.html#PluginRegistry"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.registry.PluginRegistry" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>A plugin registry</p>
<p>Custodian is intended to be innately pluggable both internally and
externally, for resource types and their filters and actions.</p>
<p>This plugin registry abstraction provides the core mechanism for
that. Its a simple string to class map, with python package
entry_point loading for external plugins.</p>
<p>As an example of defining an external plugin using a python package</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">setup</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;custodian_cmdb&quot;</span><span class="p">,</span>
    <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Custodian filters for interacting with internal CMDB&quot;</span>
    <span class="n">version</span><span class="o">=</span><span class="s1">&#39;1.0&#39;</span><span class="p">,</span>
    <span class="n">packages</span><span class="o">=</span><span class="n">find_packages</span><span class="p">(),</span>
    <span class="n">entry_points</span><span class="o">=</span><span class="p">{</span>
         <span class="s1">&#39;console_scripts&#39;</span><span class="p">:</span> <span class="p">[</span>
              <span class="s1">&#39;custodian.ec2.filters = custodian_cmdb:filter_ec2&#39;</span><span class="p">]},</span>
    <span class="p">)</span>
</pre></div>
</div>
<p>For loading the plugins we can simply invoke method:load_plugins like
so:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">PluginRegistry</span><span class="p">(</span><span class="s1">&#39;ec2.filters&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">load_plugins</span><span class="p">()</span>
</pre></div>
</div>
<dl class="method">
<dt id="c7n.registry.PluginRegistry.get">
<code class="descname">get</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/registry.html#PluginRegistry.get"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.registry.PluginRegistry.get" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="c7n.registry.PluginRegistry.items">
<code class="descname">items</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/registry.html#PluginRegistry.items"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.registry.PluginRegistry.items" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="c7n.registry.PluginRegistry.keys">
<code class="descname">keys</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/registry.html#PluginRegistry.keys"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.registry.PluginRegistry.keys" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="c7n.registry.PluginRegistry.load_plugins">
<code class="descname">load_plugins</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/registry.html#PluginRegistry.load_plugins"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.registry.PluginRegistry.load_plugins" title="Permalink to this definition">¶</a></dt>
<dd><p>Load external plugins.</p>
<p>Maid is intended to interact with internal and external systems
that are not suitable for embedding into the custodian code base.</p>
</dd></dl>

<dl class="method">
<dt id="c7n.registry.PluginRegistry.register">
<code class="descname">register</code><span class="sig-paren">(</span><em>name</em>, <em>klass=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/registry.html#PluginRegistry.register"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.registry.PluginRegistry.register" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="c7n.registry.PluginRegistry.unregister">
<code class="descname">unregister</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/registry.html#PluginRegistry.unregister"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.registry.PluginRegistry.unregister" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="module-c7n.schema">
<span id="c7n-schema-module"></span><h2>c7n.schema module<a class="headerlink" href="#module-c7n.schema" title="Permalink to this headline">¶</a></h2>
<p>Jsonschema validation of cloud custodian config.</p>
<p>We start with a walkthrough of the various class registries
of resource types and assemble and generate the schema.</p>
<p>We do some specialization to reduce overall schema size
via reference usage, although in some cases we prefer
copies, due to issues with inheritance via reference (
allowedProperties and enum extension).</p>
<p>All filters and actions are annotated with schema typically using
the utils.type_schema function.</p>
<dl class="function">
<dt id="c7n.schema.generate">
<code class="descclassname">c7n.schema.</code><code class="descname">generate</code><span class="sig-paren">(</span><em>resource_types=()</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/schema.html#generate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.schema.generate" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="c7n.schema.process_resource">
<code class="descclassname">c7n.schema.</code><code class="descname">process_resource</code><span class="sig-paren">(</span><em>type_name</em>, <em>resource_type</em>, <em>resource_defs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/schema.html#process_resource"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.schema.process_resource" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="c7n.schema.specific_error">
<code class="descclassname">c7n.schema.</code><code class="descname">specific_error</code><span class="sig-paren">(</span><em>error</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/schema.html#specific_error"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.schema.specific_error" title="Permalink to this definition">¶</a></dt>
<dd><p>Try to find the best error for humans to resolve</p>
<p>The jsonschema.exceptions.best_match error is based purely on a
mix of a strong match (ie. not anyOf, oneOf) and schema depth,
this often yields odd results that are semantically confusing,
instead we can use a bit of structural knowledge of schema to
provide better results.</p>
</dd></dl>

<dl class="function">
<dt id="c7n.schema.validate">
<code class="descclassname">c7n.schema.</code><code class="descname">validate</code><span class="sig-paren">(</span><em>data</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/schema.html#validate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.schema.validate" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-c7n.sqsexec">
<span id="c7n-sqsexec-module"></span><h2>c7n.sqsexec module<a class="headerlink" href="#module-c7n.sqsexec" title="Permalink to this headline">¶</a></h2>
<p>concurrent.futures implementation over sqs</p>
<p>Scatter/Gather or Map/Reduce style over two sqs queues.</p>
<dl class="class">
<dt id="c7n.sqsexec.MessageIterator">
<em class="property">class </em><code class="descclassname">c7n.sqsexec.</code><code class="descname">MessageIterator</code><span class="sig-paren">(</span><em>client</em>, <em>queue_url</em>, <em>limit=0</em>, <em>timeout=10</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/sqsexec.html#MessageIterator"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.sqsexec.MessageIterator" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<dl class="method">
<dt id="c7n.sqsexec.MessageIterator.ack">
<code class="descname">ack</code><span class="sig-paren">(</span><em>m</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/sqsexec.html#MessageIterator.ack"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.sqsexec.MessageIterator.ack" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="c7n.sqsexec.MessageIterator.msg_attributes">
<code class="descname">msg_attributes</code><em class="property"> = ['sequence_id', 'op', 'ser']</em><a class="headerlink" href="#c7n.sqsexec.MessageIterator.msg_attributes" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="c7n.sqsexec.MessageIterator.next">
<code class="descname">next</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/sqsexec.html#MessageIterator.next"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.sqsexec.MessageIterator.next" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="c7n.sqsexec.SQSExecutor">
<em class="property">class </em><code class="descclassname">c7n.sqsexec.</code><code class="descname">SQSExecutor</code><span class="sig-paren">(</span><em>session_factory</em>, <em>map_queue</em>, <em>reduce_queue</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/sqsexec.html#SQSExecutor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.sqsexec.SQSExecutor" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">concurrent.futures._base.Executor</span></code></p>
<dl class="method">
<dt id="c7n.sqsexec.SQSExecutor.gather">
<code class="descname">gather</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/sqsexec.html#SQSExecutor.gather"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.sqsexec.SQSExecutor.gather" title="Permalink to this definition">¶</a></dt>
<dd><p>Fetch results from separate queue</p>
</dd></dl>

<dl class="method">
<dt id="c7n.sqsexec.SQSExecutor.submit">
<code class="descname">submit</code><span class="sig-paren">(</span><em>func</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/sqsexec.html#SQSExecutor.submit"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.sqsexec.SQSExecutor.submit" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="c7n.sqsexec.SQSFuture">
<em class="property">class </em><code class="descclassname">c7n.sqsexec.</code><code class="descname">SQSFuture</code><span class="sig-paren">(</span><em>sequence_id</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/sqsexec.html#SQSFuture"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.sqsexec.SQSFuture" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">concurrent.futures._base.Future</span></code></p>
<dl class="attribute">
<dt id="c7n.sqsexec.SQSFuture.marker">
<code class="descname">marker</code><em class="property"> = &lt;object object&gt;</em><a class="headerlink" href="#c7n.sqsexec.SQSFuture.marker" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="c7n.sqsexec.SQSWorker">
<em class="property">class </em><code class="descclassname">c7n.sqsexec.</code><code class="descname">SQSWorker</code><span class="sig-paren">(</span><em>session_factory</em>, <em>map_queue</em>, <em>reduce_queue</em>, <em>limit=0</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/sqsexec.html#SQSWorker"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.sqsexec.SQSWorker" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<dl class="method">
<dt id="c7n.sqsexec.SQSWorker.process_message">
<code class="descname">process_message</code><span class="sig-paren">(</span><em>m</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/sqsexec.html#SQSWorker.process_message"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.sqsexec.SQSWorker.process_message" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="c7n.sqsexec.SQSWorker.run">
<code class="descname">run</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/sqsexec.html#SQSWorker.run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.sqsexec.SQSWorker.run" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="c7n.sqsexec.SQSWorker.stop">
<code class="descname">stop</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/sqsexec.html#SQSWorker.stop"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.sqsexec.SQSWorker.stop" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="c7n.sqsexec.SQSWorker.stopped">
<code class="descname">stopped</code><em class="property"> = False</em><a class="headerlink" href="#c7n.sqsexec.SQSWorker.stopped" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="function">
<dt id="c7n.sqsexec.named">
<code class="descclassname">c7n.sqsexec.</code><code class="descname">named</code><span class="sig-paren">(</span><em>o</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/sqsexec.html#named"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.sqsexec.named" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="c7n.sqsexec.resolve">
<code class="descclassname">c7n.sqsexec.</code><code class="descname">resolve</code><span class="sig-paren">(</span><em>o</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/sqsexec.html#resolve"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.sqsexec.resolve" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-c7n.tags">
<span id="c7n-tags-module"></span><h2>c7n.tags module<a class="headerlink" href="#module-c7n.tags" title="Permalink to this headline">¶</a></h2>
<p>Generic EC2 Resource Tag / Filters and actions</p>
<p>These work for the whole family of resources associated
to ec2 (subnets, vpc, security-groups, volumes, instances,
snapshots).</p>
<dl class="class">
<dt id="c7n.tags.RemoveTag">
<em class="property">class </em><code class="descclassname">c7n.tags.</code><code class="descname">RemoveTag</code><span class="sig-paren">(</span><em>data=None</em>, <em>manager=None</em>, <em>log_dir=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/tags.html#RemoveTag"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.tags.RemoveTag" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#c7n.actions.BaseAction" title="c7n.actions.BaseAction"><code class="xref py py-class docutils literal"><span class="pre">c7n.actions.BaseAction</span></code></a></p>
<p>Remove tags from ec2 resources.</p>
<dl class="attribute">
<dt id="c7n.tags.RemoveTag.batch_size">
<code class="descname">batch_size</code><em class="property"> = 100</em><a class="headerlink" href="#c7n.tags.RemoveTag.batch_size" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="c7n.tags.RemoveTag.concurrency">
<code class="descname">concurrency</code><em class="property"> = 2</em><a class="headerlink" href="#c7n.tags.RemoveTag.concurrency" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="c7n.tags.RemoveTag.process">
<code class="descname">process</code><span class="sig-paren">(</span><em>resources</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/tags.html#RemoveTag.process"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.tags.RemoveTag.process" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="c7n.tags.RemoveTag.process_resource_set">
<code class="descname">process_resource_set</code><span class="sig-paren">(</span><em>vol_set</em>, <em>tag_keys</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/tags.html#RemoveTag.process_resource_set"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.tags.RemoveTag.process_resource_set" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="c7n.tags.RemoveTag.schema">
<code class="descname">schema</code><em class="property"> = {'additionalProperties': False, 'required': ['type'], 'type': 'object', 'properties': {'type': {'enum': ['untag', 'unmark', 'remove-tag']}, 'tags': {'items': {'type': 'string'}, 'type': 'array'}}}</em><a class="headerlink" href="#c7n.tags.RemoveTag.schema" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="c7n.tags.Tag">
<em class="property">class </em><code class="descclassname">c7n.tags.</code><code class="descname">Tag</code><span class="sig-paren">(</span><em>data=None</em>, <em>manager=None</em>, <em>log_dir=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/tags.html#Tag"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.tags.Tag" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#c7n.actions.BaseAction" title="c7n.actions.BaseAction"><code class="xref py py-class docutils literal"><span class="pre">c7n.actions.BaseAction</span></code></a></p>
<p>Tag an ec2 resource.</p>
<dl class="attribute">
<dt id="c7n.tags.Tag.batch_size">
<code class="descname">batch_size</code><em class="property"> = 150</em><a class="headerlink" href="#c7n.tags.Tag.batch_size" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="c7n.tags.Tag.concurrency">
<code class="descname">concurrency</code><em class="property"> = 2</em><a class="headerlink" href="#c7n.tags.Tag.concurrency" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="c7n.tags.Tag.process">
<code class="descname">process</code><span class="sig-paren">(</span><em>resources</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/tags.html#Tag.process"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.tags.Tag.process" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="c7n.tags.Tag.process_resource_set">
<code class="descname">process_resource_set</code><span class="sig-paren">(</span><em>resource_set</em>, <em>tags</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/tags.html#Tag.process_resource_set"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.tags.Tag.process_resource_set" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="c7n.tags.Tag.schema">
<code class="descname">schema</code><em class="property"> = {'additionalProperties': False, 'required': ['type'], 'type': 'object', 'properties': {'type': {'enum': ['tag', 'mark']}, 'key': {'type': 'string'}, 'value': {'type': 'string'}}}</em><a class="headerlink" href="#c7n.tags.Tag.schema" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="c7n.tags.TagActionFilter">
<em class="property">class </em><code class="descclassname">c7n.tags.</code><code class="descname">TagActionFilter</code><span class="sig-paren">(</span><em>data</em>, <em>manager=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/tags.html#TagActionFilter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.tags.TagActionFilter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#c7n.filters.Filter" title="c7n.filters.Filter"><code class="xref py py-class docutils literal"><span class="pre">c7n.filters.Filter</span></code></a></p>
<p>Filter resources for tag specified future action</p>
<p>Filters resources by a &#8216;custodian_status&#8217; tag which specifies a future
date for an action.</p>
<p>The filter parses the tag values looking for an <a class="reference external" href="mailto:'op&#37;&#52;&#48;date">'op<span>&#64;</span>date</a>&#8216;
string. The date is parsed and compared to do today&#8217;s date, the
filter succeeds if today&#8217;s date is gte to the target date.</p>
<p>The optional &#8216;skew&#8217; parameter provides for incrementing today&#8217;s
date a number of days into the future. An example use case might
be sending a final notice email a few days before terminating an
instance, or snapshotting a volume prior to deletion.</p>
<div class="highlight-yaml"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">policies</span><span class="p p-Indicator">:</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">ec2-stop-marked</span>
    <span class="l l-Scalar l-Scalar-Plain">resource</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">ec2</span>
    <span class="l l-Scalar l-Scalar-Plain">filters</span><span class="p p-Indicator">:</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">marked-for-op</span>
        <span class="c1"># The default tag used is custodian_status</span>
        <span class="c1"># but that is configurable</span>
        <span class="l l-Scalar l-Scalar-Plain">tag</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">custodian_status</span>
        <span class="l l-Scalar l-Scalar-Plain">op</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">stop</span>
        <span class="c1"># Another optional tag is skew</span>
    <span class="l l-Scalar l-Scalar-Plain">actions</span><span class="p p-Indicator">:</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">stop</span>
</pre></div>
</div>
<dl class="attribute">
<dt id="c7n.tags.TagActionFilter.current_date">
<code class="descname">current_date</code><em class="property"> = None</em><a class="headerlink" href="#c7n.tags.TagActionFilter.current_date" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="c7n.tags.TagActionFilter.schema">
<code class="descname">schema</code><em class="property"> = {'additionalProperties': False, 'required': ['type'], 'type': 'object', 'properties': {'skew': {'minimum': 0, 'type': 'number'}, 'tag': {'type': 'string'}, 'type': {'enum': ['marked-for-op']}, 'op': {'enum': ['suspend', 'resume', 'terminate', 'stop', 'start', 'delete', 'deletion']}}}</em><a class="headerlink" href="#c7n.tags.TagActionFilter.schema" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="c7n.tags.TagCountFilter">
<em class="property">class </em><code class="descclassname">c7n.tags.</code><code class="descname">TagCountFilter</code><span class="sig-paren">(</span><em>data</em>, <em>manager=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/tags.html#TagCountFilter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.tags.TagCountFilter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#c7n.filters.Filter" title="c7n.filters.Filter"><code class="xref py py-class docutils literal"><span class="pre">c7n.filters.Filter</span></code></a></p>
<p>Simplify tag counting..</p>
<p>ie. these two blocks are equivalent</p>
<div class="highlight-yaml"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">filters</span><span class="p p-Indicator">:</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">value</span>
      <span class="l l-Scalar l-Scalar-Plain">key</span><span class="p p-Indicator">:</span> <span class="s">&quot;[length(Tags)][0]&quot;</span>
      <span class="l l-Scalar l-Scalar-Plain">op</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">gte</span>
      <span class="l l-Scalar l-Scalar-Plain">value</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">8</span>

<span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">filters</span><span class="p p-Indicator">:</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">tag-count</span>
      <span class="l l-Scalar l-Scalar-Plain">value</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">8</span>
</pre></div>
</div>
<dl class="attribute">
<dt id="c7n.tags.TagCountFilter.schema">
<code class="descname">schema</code><em class="property"> = {'additionalProperties': False, 'required': ['type'], 'type': 'object', 'properties': {'count': {'minimum': 0, 'type': 'integer'}, 'type': {'enum': ['tag-count']}, 'op': {'enum': ['regex', 'ni', 'gt', 'lt', 'gte', 'glob', 'not-equal', 'equal', 'greater-than', 'ne', 'ge', 'le', 'lte', 'in', 'less-than', 'eq', 'not-in']}}}</em><a class="headerlink" href="#c7n.tags.TagCountFilter.schema" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="c7n.tags.TagDelayedAction">
<em class="property">class </em><code class="descclassname">c7n.tags.</code><code class="descname">TagDelayedAction</code><span class="sig-paren">(</span><em>data=None</em>, <em>manager=None</em>, <em>log_dir=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/tags.html#TagDelayedAction"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.tags.TagDelayedAction" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#c7n.actions.BaseAction" title="c7n.actions.BaseAction"><code class="xref py py-class docutils literal"><span class="pre">c7n.actions.BaseAction</span></code></a></p>
<p>Tag resources for future action.</p>
<div class="highlight-yaml"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">policies</span><span class="p p-Indicator">:</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">ec2-stop-marked</span>
    <span class="l l-Scalar l-Scalar-Plain">resource</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">ec2</span>
    <span class="l l-Scalar l-Scalar-Plain">filters</span><span class="p p-Indicator">:</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">marked-for-op</span>
        <span class="c1"># The default tag used is custodian_status</span>
        <span class="c1"># but that is configurable</span>
        <span class="l l-Scalar l-Scalar-Plain">tag</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">custodian_status</span>
        <span class="l l-Scalar l-Scalar-Plain">op</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">stop</span>
        <span class="c1"># Another optional tag is skew</span>
    <span class="l l-Scalar l-Scalar-Plain">actions</span><span class="p p-Indicator">:</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">stop</span>
</pre></div>
</div>
<dl class="attribute">
<dt id="c7n.tags.TagDelayedAction.batch_size">
<code class="descname">batch_size</code><em class="property"> = 200</em><a class="headerlink" href="#c7n.tags.TagDelayedAction.batch_size" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="c7n.tags.TagDelayedAction.process">
<code class="descname">process</code><span class="sig-paren">(</span><em>resources</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/tags.html#TagDelayedAction.process"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.tags.TagDelayedAction.process" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="c7n.tags.TagDelayedAction.process_resource_set">
<code class="descname">process_resource_set</code><span class="sig-paren">(</span><em>resource_set</em>, <em>tags</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/tags.html#TagDelayedAction.process_resource_set"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.tags.TagDelayedAction.process_resource_set" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="c7n.tags.TagDelayedAction.schema">
<code class="descname">schema</code><em class="property"> = {'additionalProperties': False, 'required': ['type'], 'type': 'object', 'properties': {'tag': {'type': 'string'}, 'type': {'enum': ['mark-for-op']}, 'days': {'exclusiveMinimum': True, 'minimum': 0, 'type': 'number'}, 'op': {'enum': ['suspend', 'resume', 'terminate', 'stop', 'start', 'delete', 'deletion']}}}</em><a class="headerlink" href="#c7n.tags.TagDelayedAction.schema" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="c7n.tags.TagTrim">
<em class="property">class </em><code class="descclassname">c7n.tags.</code><code class="descname">TagTrim</code><span class="sig-paren">(</span><em>data=None</em>, <em>manager=None</em>, <em>log_dir=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/tags.html#TagTrim"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.tags.TagTrim" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#c7n.actions.BaseAction" title="c7n.actions.BaseAction"><code class="xref py py-class docutils literal"><span class="pre">c7n.actions.BaseAction</span></code></a></p>
<p>Automatically remove tags from an ec2 resource.</p>
<p>EC2 Resources have a limit of 10 tags, in order to make
additional tags space on a set of resources, this action can
be used to remove enough tags to make the desired amount of
space while preserving a given set of tags.</p>
<div class="highlight-yaml"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">policies</span><span class="p p-Indicator">:</span>
   <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">ec2-tag-trim</span>
     <span class="l l-Scalar l-Scalar-Plain">comment</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">|</span>
       <span class="no">Any instances with 8 or more tags get tags removed until</span>
       <span class="no">they match the target tag count, in this case 7 so we</span>
       <span class="no">that we free up a tag slot for another usage.</span>
     <span class="l l-Scalar l-Scalar-Plain">resource</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">ec2</span>
     <span class="l l-Scalar l-Scalar-Plain">filters</span><span class="p p-Indicator">:</span>
         <span class="c1"># Filter down to resources which already have 8 tags</span>
         <span class="c1"># as we need space for 3 more, this also ensures that</span>
         <span class="c1"># metrics reporting is correct for the policy.</span>
         <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">value</span>
         <span class="l l-Scalar l-Scalar-Plain">key</span><span class="p p-Indicator">:</span> <span class="s">&quot;[length(Tags)][0]&quot;</span>
         <span class="l l-Scalar l-Scalar-Plain">op</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">ge</span>
         <span class="l l-Scalar l-Scalar-Plain">value</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">8</span>
     <span class="l l-Scalar l-Scalar-Plain">actions</span><span class="p p-Indicator">:</span>
       <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">tag-trim</span>
         <span class="l l-Scalar l-Scalar-Plain">space</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">3</span>
         <span class="l l-Scalar l-Scalar-Plain">preserve</span><span class="p p-Indicator">:</span>
          <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">OwnerContact</span>
          <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">ASV</span>
          <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">CMDBEnvironment</span>
          <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">downtime</span>
          <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">custodian_status</span>
</pre></div>
</div>
<dl class="attribute">
<dt id="c7n.tags.TagTrim.max_tag_count">
<code class="descname">max_tag_count</code><em class="property"> = 10</em><a class="headerlink" href="#c7n.tags.TagTrim.max_tag_count" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="c7n.tags.TagTrim.process">
<code class="descname">process</code><span class="sig-paren">(</span><em>resources</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/tags.html#TagTrim.process"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.tags.TagTrim.process" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="c7n.tags.TagTrim.process_resource">
<code class="descname">process_resource</code><span class="sig-paren">(</span><em>i</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/tags.html#TagTrim.process_resource"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.tags.TagTrim.process_resource" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="c7n.tags.TagTrim.process_tag_removal">
<code class="descname">process_tag_removal</code><span class="sig-paren">(</span><em>resource</em>, <em>tags</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/tags.html#TagTrim.process_tag_removal"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.tags.TagTrim.process_tag_removal" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="c7n.tags.TagTrim.schema">
<code class="descname">schema</code><em class="property"> = {'additionalProperties': False, 'required': ['type'], 'type': 'object', 'properties': {'preserve': {'items': {'type': 'string'}, 'type': 'array'}, 'type': {'enum': ['tag-trim']}, 'space': {'type': 'integer'}}}</em><a class="headerlink" href="#c7n.tags.TagTrim.schema" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="function">
<dt id="c7n.tags.register_tags">
<code class="descclassname">c7n.tags.</code><code class="descname">register_tags</code><span class="sig-paren">(</span><em>filters</em>, <em>actions</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/tags.html#register_tags"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.tags.register_tags" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-c7n.utils">
<span id="c7n-utils-module"></span><h2>c7n.utils module<a class="headerlink" href="#module-c7n.utils" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="c7n.utils.DateTimeEncoder">
<em class="property">class </em><code class="descclassname">c7n.utils.</code><code class="descname">DateTimeEncoder</code><span class="sig-paren">(</span><em>skipkeys=False</em>, <em>ensure_ascii=True</em>, <em>check_circular=True</em>, <em>allow_nan=True</em>, <em>sort_keys=False</em>, <em>indent=None</em>, <em>separators=None</em>, <em>encoding='utf-8'</em>, <em>default=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/utils.html#DateTimeEncoder"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.utils.DateTimeEncoder" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">json.encoder.JSONEncoder</span></code></p>
<dl class="method">
<dt id="c7n.utils.DateTimeEncoder.default">
<code class="descname">default</code><span class="sig-paren">(</span><em>obj</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/utils.html#DateTimeEncoder.default"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.utils.DateTimeEncoder.default" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="function">
<dt id="c7n.utils.annotation">
<code class="descclassname">c7n.utils.</code><code class="descname">annotation</code><span class="sig-paren">(</span><em>i</em>, <em>k</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/utils.html#annotation"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.utils.annotation" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="c7n.utils.chunks">
<code class="descclassname">c7n.utils.</code><code class="descname">chunks</code><span class="sig-paren">(</span><em>iterable</em>, <em>size=50</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/utils.html#chunks"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.utils.chunks" title="Permalink to this definition">¶</a></dt>
<dd><p>Break an iterable into lists of size</p>
</dd></dl>

<dl class="function">
<dt id="c7n.utils.dumps">
<code class="descclassname">c7n.utils.</code><code class="descname">dumps</code><span class="sig-paren">(</span><em>data</em>, <em>fh=None</em>, <em>indent=0</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/utils.html#dumps"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.utils.dumps" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="c7n.utils.format_event">
<code class="descclassname">c7n.utils.</code><code class="descname">format_event</code><span class="sig-paren">(</span><em>evt</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/utils.html#format_event"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.utils.format_event" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="c7n.utils.get_account_id">
<code class="descclassname">c7n.utils.</code><code class="descname">get_account_id</code><span class="sig-paren">(</span><em>session</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/utils.html#get_account_id"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.utils.get_account_id" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="c7n.utils.loads">
<code class="descclassname">c7n.utils.</code><code class="descname">loads</code><span class="sig-paren">(</span><em>body</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/utils.html#loads"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.utils.loads" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="c7n.utils.local_session">
<code class="descclassname">c7n.utils.</code><code class="descname">local_session</code><span class="sig-paren">(</span><em>factory</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/utils.html#local_session"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.utils.local_session" title="Permalink to this definition">¶</a></dt>
<dd><p>Cache a session thread local for up to 45m</p>
</dd></dl>

<dl class="function">
<dt id="c7n.utils.parse_s3">
<code class="descclassname">c7n.utils.</code><code class="descname">parse_s3</code><span class="sig-paren">(</span><em>s3_path</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/utils.html#parse_s3"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.utils.parse_s3" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="c7n.utils.query_instances">
<code class="descclassname">c7n.utils.</code><code class="descname">query_instances</code><span class="sig-paren">(</span><em>session</em>, <em>client=None</em>, <em>**query</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/utils.html#query_instances"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.utils.query_instances" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a list of ec2 instances for the query.</p>
</dd></dl>

<dl class="function">
<dt id="c7n.utils.set_annotation">
<code class="descclassname">c7n.utils.</code><code class="descname">set_annotation</code><span class="sig-paren">(</span><em>i</em>, <em>k</em>, <em>v</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/utils.html#set_annotation"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.utils.set_annotation" title="Permalink to this definition">¶</a></dt>
<dd><div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="p">{}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">set_annotation</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s1">&#39;marker&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">annotation</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s1">&#39;marker&#39;</span><span class="p">)</span>
<span class="go">[&#39;a&#39;]</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="c7n.utils.type_schema">
<code class="descclassname">c7n.utils.</code><code class="descname">type_schema</code><span class="sig-paren">(</span><em>type_name</em>, <em>inherits=None</em>, <em>rinherit=None</em>, <em>aliases=None</em>, <em>required=None</em>, <em>**props</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/utils.html#type_schema"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.utils.type_schema" title="Permalink to this definition">¶</a></dt>
<dd><p>jsonschema generation helper</p>
<dl class="docutils">
<dt>params:</dt>
<dd><ul class="first last">
<li><p class="first">type_name: name of the type</p>
</li>
<li><p class="first">inherits: list of document fragments that are required via anyOf[$ref]</p>
</li>
<li><dl class="first docutils">
<dt>rinherit: use another schema as a base for this, basically work around</dt>
<dd><p class="first last">inherits issues with additionalProperties and type enums.</p>
</dd>
</dl>
</li>
<li><p class="first">aliases: additional names this type maybe called</p>
</li>
<li><p class="first">required: list of required properties, by default &#8216;type&#8217; is required</p>
</li>
<li><p class="first"><a href="#id1"><span class="problematic" id="id2">**</span></a>props: additional key value properties</p>
</li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="c7n.utils.yaml_load">
<code class="descclassname">c7n.utils.</code><code class="descname">yaml_load</code><span class="sig-paren">(</span><em>value</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/c7n/utils.html#yaml_load"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#c7n.utils.yaml_load" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-c7n.version">
<span id="c7n-version-module"></span><h2>c7n.version module<a class="headerlink" href="#module-c7n.version" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-c7n">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-c7n" title="Permalink to this headline">¶</a></h2>
</div>
</div>


           </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, Capital One Services, LLC.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>